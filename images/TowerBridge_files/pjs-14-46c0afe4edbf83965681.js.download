webpackJsonp([14],{918:function(e,a,t){"use strict";function n(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function s(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function r(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}Object.defineProperty(a,"__esModule",{value:!0});var o=t(0),p=t.n(o),l=t(23),i=t.n(l),c=t(9),u=t(6),m=t.n(u),y=t(5),d=t.n(y),h=t(81),g=t(201),f=t(51),T=t(20),E=t(3),v={BOARD:"board",QUERY:"query",RECENT:"recent_query",TRENDING:"trending",USER:"user"},b=[v.QUERY,v.USER,v.BOARD,v.RECENT,v.TRENDING],N=function(e){function a(){var t,r,o;n(this,a);for(var p=arguments.length,l=Array(p),i=0;i<p;i++)l[i]=arguments[i];return t=r=s(this,e.call.apply(e,[this].concat(l))),r.handleKeyDown=function(e){var a=r.props,t=a.hoveredItem,n=a.typeaheadSuggestions,s=void 0;return e.keyCode===c.a.KeyCode.UP&&(s=t?0===n.indexOf(t)?void 0:n[n.indexOf(t)-1]:n[n.length-1]),s},r.handleOnClickItem=function(e){var a=r.props;(0,a.onTypeaheadItemSelected)(e,a.value)},r.handleRemoveRecentQuery=function(e,a){if(e){var t=r.props,n=t.emptySuggestions,s=t.refreshData,o=t.updateEmptySuggestions;d.a.create("TypeaheadClearRecentResource",{query:e}).callDelete().then(s());var p=n.items.slice(),l=p.findIndex(function(e){return e.resultIndex===a});p.splice(l,1),o(p)}},o=t,s(r,o)}return r(a,e),a.prototype.componentWillReceiveProps=function e(a){var t=this.props,n=t.emptySuggestions,s=t.updateEmptySuggestions;a.emptySuggestions&&n!==a.emptySuggestions&&a.emptySuggestions.items&&s(a.emptySuggestions.items),f.a.mark("visible_progress_elapsed_ms",null)},a.prototype.renderTypeaheadItem=function e(a,t){var n=this,s=this.props,r=s.hoveredItem,o=s.onHoverItem,l=s.value;a.resultIndex=a.resultIndex||t;var i={backgroundColor:r===a?"#f1f1f1":"inherit",color:a.color?a.color:""},c=void 0;switch(a.type){case v.QUERY:var u=l.toLowerCase(),m=void 0,y=void 0;0===a.label.indexOf(l)?(m=u,y=a.label.slice(u.length)):y=a.label,c=p.a.createElement("a",{style:i},p.a.createElement("span",{className:"typeaheadName"},p.a.createElement("span",{className:"darkText"},m),p.a.createElement("span",{className:"lightText"},y)));break;case v.USER:c=p.a.createElement("a",{className:"user",style:i},p.a.createElement("span",{className:"typeaheadImg"},p.a.createElement("img",{alt:"",role:"presentation",src:a.image_small_url})),p.a.createElement("span",{className:"typeaheadName"},p.a.createElement("div",{className:"label"},a.label),p.a.createElement("div",{className:"subLabel"},a.subLabel)));break;case v.BOARD:c=p.a.createElement("a",{className:"board",style:i},p.a.createElement("span",{className:"typeaheadImg"},p.a.createElement("img",{alt:"",role:"presentation",src:a.image_thumbnail_url})),p.a.createElement("span",{className:"typeaheadName"},p.a.createElement("div",{className:"label"},a.label),p.a.createElement("div",{className:"subLabel"},a.subLabel)));break;case v.RECENT:c=p.a.createElement("a",{className:"recentQuery",style:i},p.a.createElement("span",{className:"remove",onClick:function e(t){t.stopPropagation(),t.preventDefault(),n.handleRemoveRecentQuery(a.label,a.resultIndex)},role:"button"}),p.a.createElement("span",{className:"typeaheadName"},a.label));break;case v.TRENDING:c=p.a.createElement("a",{className:a.class_name,style:i},p.a.createElement("span",{className:"typeaheadName"},p.a.createElement("span",{className:"darkText"},a.label)))}return p.a.createElement("li",{key:t,onBlur:function e(){},onClick:function e(t){t.stopPropagation(),n.handleOnClickItem(a)},onFocus:function e(){return o(a)},onMouseDown:function e(a){a.preventDefault()},onMouseOut:function e(a){a.preventDefault()},onMouseOver:function e(){return o(a)},role:"listitem"},c)},a.prototype.renderTypeaheadItemsInGroups=function e(a,t,n){var s=this,r=this.props.i18n,o=n,l=[];if(a!==v.QUERY){var i="";switch(a){case v.USER:i=r._("People");break;case v.BOARD:i=r._("Boards");break;case v.RECENT:i=r._("Recent searches");break;case v.TRENDING:i=r._("Trending ideas")}var c=p.a.createElement("li",{key:o,onMouseDown:function e(a){a.preventDefault()}},p.a.createElement("a",{className:"titleItem",style:{cursor:"default",backgroundColor:"inherit"}},p.a.createElement("span",{className:"typeaheadName"},i)));o+=1,l.push(c)}return t.forEach(function(e,a){return l.push(s.renderTypeaheadItem(e,o+a))}),l},a.prototype.render=function e(){var a=this,t=this.props,n=t.className,s=t.emptySuggestions,r=t.focused,o=t.maxHeight,l=t.onTypeaheadMouseOut,c=t.onTypeaheadSuggestionsChange,u=t.pinScope,y=t.typeaheadSuggestions,d=t.value,f=null;return r&&function(){var e=!d&&s&&s.items?s.items:y,t=i.a.groupBy(e,function(e){return e.type}),r=[],c=0;b.forEach(function(e){if(t[e]){var n=a.renderTypeaheadItemsInGroups(e,t[e],c);c+=n.length,r=r.concat(n)}});var u=m()(n,"open","Typeahead","typeaheadWithTitles"),g=o?{maxHeight:o,overflowY:"auto"}:null;f=p.a.createElement(h.a,{view:2,viewParameter:103,isSurface:!0},p.a.createElement("div",{className:u,onKeyDown:a.handleKeyDown},p.a.createElement("ul",{className:"results",onBlur:l,onMouseOut:l,style:g},r)))}(),p.a.createElement(g.a,{onTypeaheadSuggestionsChange:c,resourceName:"AdvancedTypeaheadResource",resourceOptions:{pin_scope:u},allowSearchOnMount:!0,value:d},f)},a}(o.Component);N.propTypes={className:o.PropTypes.string.isRequired,pinScope:o.PropTypes.oneOf(["pins","my_pins","buyable_pins"]).isRequired,emptySuggestions:o.PropTypes.shape({items:o.PropTypes.arrayOf(o.PropTypes.shape({class_name:o.PropTypes.string,label:o.PropTypes.string,query:o.PropTypes.string,type:o.PropTypes.string,url:o.PropTypes.string}))}),focused:o.PropTypes.bool.isRequired,hoveredItem:o.PropTypes.shape({class_name:o.PropTypes.string,label:o.PropTypes.string,query:o.PropTypes.string,type:o.PropTypes.string,url:o.PropTypes.string}),i18n:E.a,maxHeight:o.PropTypes.number,onHoverItem:o.PropTypes.func.isRequired,onTypeaheadItemSelected:o.PropTypes.func.isRequired,onTypeaheadMouseOut:o.PropTypes.func.isRequired,onTypeaheadSuggestionsChange:o.PropTypes.func.isRequired,refreshData:o.PropTypes.func,typeaheadSuggestions:o.PropTypes.arrayOf(o.PropTypes.shape({class_name:o.PropTypes.string,label:o.PropTypes.string,query:o.PropTypes.string,type:o.PropTypes.string,url:o.PropTypes.string})).isRequired,updateEmptySuggestions:o.PropTypes.func.isRequired,value:o.PropTypes.string.isRequired},a.default=t.i(E.b)(t.i(T.a)({name:"AdvancedTypeaheadResource",key:"emptySuggestions",options:function e(a){return{term:"",pin_scope:a.pinScope}}},{allowStale:!1})(N))}});