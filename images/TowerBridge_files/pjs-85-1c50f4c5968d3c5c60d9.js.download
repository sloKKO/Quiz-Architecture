webpackJsonp([85,35],{1374:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2700),r=i.n(n),s=i(2699),a=i.n(s),o=i(103),u=i.n(o),l=i(47),c=i(551),d=i(67),p=i(40),h=i(7),f=i(143),_=i.n(f),m=i(2701),v=i.n(m),S=i(11),x=i(603),g=i(226),T={};T.launchPlacedExperience=function(e,t,i){return l.default.instance.getPlacedExperienceWithContext(e,t).then(function(t){return t?T.launchFetchedPlacedExperience(t,e,i):Promise.resolve(!1)})},T.launchFetchedPlacedExperience=function(e,t,n){var s=l.default.instance;if(e.placement_id=t,c.default.instance().canSupportExperience(e))return c.default.instance().startTutorial(e).then(function(){return s.viewPlacedExperience(t,e.experience_id),Promise.resolve(!0)});if(8===e.type)return v()().then(function(t){var i=t.default,n=new i({options:{anchor:e.display_data.anchor,append_to:e.display_data.append_to,experience:e,tooltip_only:e.display_data.tooltip_only,dismiss_on_event_types:e.display_data.dismiss_on_event_types,tooltip_options:Object.assign({},e.display_data),usm_placed_experience:e.usm_experience?e:null}});return n.render().then(function(){return h.a.instance.publish("site","appendToMainModule",{module:n}),!0})});if(10026===e.experience_id){if(!g.a.isTutorialActive())return r()().then(function(t){var i=t.default,n=new i({options:{placedExperienceId:e.id}});return d.default.get().createAndShowModal(n,{only_modal:!0}),!0})}else{if([11019,11023,500110,500131,500207].includes(e.experience_id))return a()().then(function(t){var i=t.default,n=new i({options:{banner_text:e.display_data.banner_text,banner_string_unsafe:e.display_data.banner_string_unsafe,transition_button:e.display_data.transition_button,transition_event:e.display_data.transition_event,transition_text:e.display_data.transition_text,transition_string_unsafe:e.display_data.transition_string_unsafe,placed_experience_id:e.id,experience_id:e.experience_id}});return n.render().then(function(){return h.a.instance.publish("site","appendToMainModule",{module:n}),!0})});if(5===e.type){if(n)return u()().then(function(t){var r=t.default,a=new r({options:e.display_data});return d.default.get().createAndShowModal(a,{mask_type:"dark",can_dismiss:!1}),s.viewPlacedExperienceId(e.id),i.i(S.a)("web_survey_viewed"),n.listen(a,"confirm",function(){window.open(e.display_data.uri),s.completePlacedExperienceId(e.id),i.i(S.a)("web_survey_completed")}),n.listen(a,"close",function(){s.dismissPlacedExperienceId(e.id),i.i(S.a)("web_survey_dismissed")}),!0})}else{if(10===e.type)return e.display_data.module?(s.viewPlacedExperienceId(e.id),p.a.load({name:e.display_data.module}).then(function(e){return _()().then(function(t){return t.default.addToast(e),!0})})):Promise.resolve(!1);var o=T.Tutorials[e.experience_id];if(o)return x.default.instance().startTutorial(o,{display_data:e.display_data}).then(function(){return s.viewPlacedExperience(t,e.experience_id),Promise.resolve(!0)})}}},T.Tutorials={},T.Tutorials[10010]="firstPinIntro",T.Tutorials[40002]="interestsNuxMweb",T.Tutorials[60001]="analyticsHomeUserEd",T.Tutorials[60002]="analyticsAudienceSelectorUserEd",T.Tutorials[11002]="emptyBoardIntro",T.Tutorials[11004]="emptyBoardIntro",T.Tutorials[11007]="repin",T.Tutorials[11009]="repin",T.Tutorials[11024]="flashlightGuide",T.Tutorials[11026]="flashlightPulser",T.Tutorials[500278]="renux",t.default=T},1408:function(e,t,i){"use strict";var n=i(17),r=i.n(n),s=i(969),a=i(38),o=i(67),u=i(15),l=a.a.getLogger("ModalTutorial"),c=function e(t,i){s.a.call(this,t,i),this.modal=null};c.prototype=Object.create(s.a.prototype),c.prototype.onStart=function(){var e=this;return new Promise(function(t,i){if(e.displayData.anchor&&!e._isOnScreen(r()(e.displayData.anchor)))return void i(new Error("Highlighted element is not on screen."));t(void 0)})},c.prototype.onExit=function(){this.modal&&(this.modal.destroy(),this.modal=null),s.a.prototype.onExit.call(this)},c.prototype.renderStepModule=function(e,t){var i=this,n=void 0;if(this.modal){var r=function e(){t&&t.destroy()};n=this.modal.setSubmodule(e).then(r,r)}else{var s=(this.displayData.modalStyle+" "||"")+u.a.attributes.gender;n=o.default.get().createAndShowModalCorrect(e,{mask_type:"dark",can_dismiss:!1,modal_style:s}).then(function(t){i.modal=t,e.modal=t,i.modal.childListen("next",i.tutorialManager._next.bind(i.tutorialManager)),i.modal.childListen("previous",i.tutorialManager._previous.bind(i.tutorialManager))})}return n.then(function(){void 0!==e.setModalPosition&&e.setModalPosition(),e.onShow()}).catch(function(e){l.debug(e)})},c.prototype._isOnScreen=function(e){if(e.length){var t=r()(window),i=t.scrollTop(),n=i+t.height(),s=e.offset().top;return s+e.height()<=n&&s>=i}return!1},t.a=c},2040:function(e,t,i){"use strict";var n=i(39),r=i(32),s=i(969),a=i(2041),o=function e(t,i){s.a.call(this,t,i),this.SUB_TUTORIAL_MAP={modal:a.a},this._subTutorial=null;var n=void 0;this.displayData.modal?n=a.a:this.SUB_TUTORIAL_MAP[this.displayData.sub_type]&&(n=this.SUB_TUTORIAL_MAP[this.displayData.sub_type]),n&&(this._subTutorial=new n(this.placedExperience,this.tutorialManager))};o.prototype=Object.create(s.a.prototype),o.prototype.onStart=function(){return this._subTutorial.onStart()},o.prototype.onExit=function(){return this._subTutorial.onExit().then(function(){var e={event_type:4105,view_type:24},t=n.a.fromPlainObject(e);r.a.getInstance().addEvent(t)})},o.prototype.nextStep=function(e){var t=this;return this._subTutorial.nextStep(e).then(function(){if(0===e){var t={event_type:4104,view_type:24},i=n.a.fromPlainObject(t);r.a.getInstance().addEvent(i)}}).then(function(){var e=t._subTutorial.getCurrentViewParameterType();if(e){var i={event_type:13,view_type:24,view_parameter:e},s=n.a.fromPlainObject(i);r.a.getInstance().addEvent(s)}})},t.a=o},2041:function(e,t,i){"use strict";var n=i(67),r=i(1408),s=function e(t,i){r.a.call(this,t,i)};s.prototype=Object.create(r.a.prototype),s.prototype.onExit=function(){var e=this.modal;return e?(this.modal=null,n.default.get().removeModalWithAnimation(e,".flexibleSetup",500)):Promise.resolve()},t.a=s},239:function(e,t,i){"use strict";var n=i(5),r=i.n(n),s={log:function e(t,i,n){var s={event:t};void 0!==i&&(s.sample_rate=i),void 0!==n&&(s.tags=n),r.a.create("IncrementEventResource",s).callCreate({showError:!1})}};t.a=s},2699:function(e,t,i){e.exports=function(){return new Promise(function(e){i.e(154).then(function(t){e(i(1062))}.bind(null,i)).catch(i.oe)})}},2700:function(e,t,i){e.exports=function(){return new Promise(function(e){i.e(153).then(function(t){e(i(1063))}.bind(null,i)).catch(i.oe)})}},2701:function(e,t,i){e.exports=function(){return new Promise(function(e){i.e(155).then(function(t){e(i(1765))}.bind(null,i)).catch(i.oe)})}},340:function(e,t,i){e.exports=function(){return new Promise(function(e){Promise.resolve().then(function(t){e(i(97))}.bind(null,i)).catch(i.oe)})}},551:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(35),r=i(9),s=i(861),a=i(969),o=i(185),u=i.n(o),l=i(340),c=i.n(l),d=i(38),p=i(1408),h=i(112),f=i(2040),_=i(7),m=i(57),v=i(11),S=i(226),x=d.a.getLogger("ExperienceTutorialManager"),g=function e(){this.TUTORIAL_MAP={},this.TUTORIAL_MAP[0]=a.a,this.TUTORIAL_MAP[9]=f.a,this.TUTORIAL_MAP[8]=p.a,S.a.setExperienceTutorialManager(this),this.init()};g.prototype={init:function e(){this._isActive=!1,this.experience=null,this.tutorial=null,this.currentStep=0,this.steps=null},startTutorial:function e(t){var i=this;if(S.a.isTutorialActive())return Promise.reject(new Error("another tutorial is already active"));var n=this._getStoredData();return!n||t&&n.experience.id!==t.id||(t=n.experience,this.currentStep=n.step),t&&void 0!==t.type&&t.type in this.TUTORIAL_MAP?(this._isActive=!0,this.experience=t,this.tutorial=new this.TUTORIAL_MAP[this.experience.type](this.experience,this),_.a.instance.subscribe("tutorial","tutorialGoToStep",function(e,t,n){i._setStep(n)}),this.tutorial.onStart().then(function(){return i.steps=i.experience.display_data.steps,i._funnelPrefix="tutorial_"+i.experience.id,i._setStep(i.currentStep)},function(){i._isActive=!1})):Promise.reject(new Error("invalid placedExperience or no placedExperience to be resumed"))},_next:function e(){return!this.steps||this.currentStep>=this.steps.length-1?this._endTutorial(!0,!0):this._setStep(this.currentStep+1)},_previous:function e(){return this.currentStep<=0?this._endTutorial(!1):this._setStep(this.currentStep-1)},_dismiss:function e(){return this._endTutorial(!1)},_endTutorial:function e(t,r){var a=function(){var e=this.experience.experience_id,a=this.experience.display_data,o=a.nextUrlInfo,l=o?o.url:null,d=!!o&&o.forceRefresh,p=!!o&&o.forceFullPageRefresh,f=!!a.relaunchPlacement,m=f?this.experience.placement_id:null;this.clearStoredData(),this.init();var v=Promise.resolve();return t&&l?function(){var e=new h.a;p?i.i(n.a)(l):d&&(e.evt=new s.a("",null,{forceRefresh:1})),c()().then(function(t){t.default.navigate(l,e)})}():f&&m&&(v=u()().then(function(e){return e.default.launchPlacedExperience(m)})),v.then(function(){r&&_.a.instance.publish(e,"pulserClicked",{})})}.bind(this),o=t?this.tutorial.completePlacedExperience():this.tutorial.dismissPlacedExperience();return t&&i.i(v.a)(this._funnelPrefix+"_complete"),o.fin(this.tutorial.onExit.bind(this.tutorial)).then(a)},_setStep:function e(t){return x.debug("set step from",this.currentStep,"to",t),i.i(v.a)(this._funnelPrefix+"_step"+t),t<0||t>=this.steps.length?this._endTutorial(!0).then(function(){throw new Error("step is out of range")}):(this.currentStep=t,this._saveCurrentStep(),this.tutorial.nextStep(t))},isRunningTutorial:function e(){return this._isActive},setTutorialActive:function e(t){this._isActive=t},_getStoredData:function e(){var t=m.a.sessionStorage.getItem(r.a.TUTORIAL_SESSION_KEY);return t&&t.experienceTutorial?t:null},canSupportExperience:function e(t){return t.type in this.TUTORIAL_MAP&&"steps"in t.display_data},_saveCurrentStep:function e(){this.experience&&[11021,11020].includes(this.experience.experience_id)||m.a.sessionStorage.setItem(r.a.TUTORIAL_SESSION_KEY,{experience:this.experience,step:this.currentStep,experienceTutorial:!0})},clearStoredData:function e(){m.a.sessionStorage.removeItem(r.a.TUTORIAL_SESSION_KEY)}};var T=null;g.instance=function(){return T||(T=new g),T},t.default=g},603:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(17),r=i.n(n),s=i(70),a=i(9),o=i(861),u=i(239),l=i(97),c=i(38),d=i(229),p=i(40),h=i(112),f=i(57),_=i(11),m=i(226),v=c.a.getLogger("TutorialManager"),S=function e(t,i){this.url=t,this.forceRefresh=!!i},x=function e(){this.TUTORIAL_CONFIG={testTutorial:{stepNames:[],nextUrlInfo:function e(){return new S(null,!1)},canExit:!1,onUserExit:function e(){}},interestsNuxMweb:{stepNames:["NewUserWelcome","NewUserInterestPicker","NewUserSetupSpinner"],expiredSteps:{},canExit:!1,nextUrlInfo:function e(){return new S("/",!0)},onUserExit:function e(){}}},this.init()};x.prototype={init:function e(){this._isActive=!1,this.moduleContainer=null,this.renderModule=!0,this.progressModule=null,r()("body").removeClass(this.tutorialClassName),this.tutorialName=null,this.tutorialClassName=null,this.tutorial=null,this.allStepNames=null,this.numTotalSteps=null,this.currentStep=null,this.isZoomedIn=!1,m.a.setTutorialManager(this)},startTutorial:function e(t,i){return i=i||{},m.a.isTutorialActive()?Promise.reject(new Error("another tutorial is already active")):this.TUTORIAL_CONFIG[t]?(this.moduleContainer=i.moduleContainer,this.renderModule=i.renderModule,this.progressModule=i.progressModule||this.progressModule,this._isActive?(this.renderModule===!1||this.currentModule||this._loadModuleForStep(this.currentStep),Promise.resolve()):(this._start(t,!0),Promise.resolve())):Promise.reject(new Error("tutorial config does not exist"))},setProgressModule:function e(t){this.progressModule!==t&&(this.progressModule=t,this.progressModule.listen(this.progressModule,"next",this._next.bind(this)),this.progressModule.listen(this.progressModule,"previous",this._previous.bind(this)),this._updateProgressModuleStep())},stopTutorial:function e(){this._isActive&&this.init()},resumeTutorial:function e(){if(!m.a.isTutorialActive()){var t=this._getStoredData();t&&t.name&&this._start(t.name,!1)}},_start:function e(t,i){var n=this.TUTORIAL_CONFIG[t];n&&(this._clear(i),this._isActive=!0,this.tutorialName=t,this.tutorialClassName=this.tutorialName+a.a.TUTORIAL_POSTFIX,r()("body").addClass(this.tutorialClassName),this.tutorial=n,this.expiredSteps=this.tutorial.expiredSteps,this.allStepNames=this.tutorial.stepNames,this.numTotalSteps=this.tutorial.stepNames.length,this._funnelPrefix="tutorial_"+t,this.renderModule=this.renderModule!==!1,!this.moduleContainer&&this.renderModule||this._setStep(this._getStoredStep()||this.allStepNames[0]),u.a.log("tutorial."+t+"_started"))},isRunningTutorial:function e(){return this._isActive},_next:function e(){var t=this._getStepIndex(this.currentStep);if(this.currentStep===(this.allStepNames||[]).slice(-1)[0])return void this._endTutorial(!0);this._setStep(this.allStepNames[t+1])},_previous:function e(){var t=this._getStepIndex(this.currentStep);if(0===t)return d.default.logToServer(d.default.SERVER_LOG_TYPE.LOG,d.default.HTTP_METHOD.POST,{type:"tutorial",tutorial:this.tutorialName,step:this.currentStep,step_number:t,action:"exit"}),this.tutorial.onUserExit(t),void this._endTutorial(!1);this._setStep(this.allStepNames[t-1])},_dismiss:function e(){this._endTutorial(!1)},_endTutorial:function e(t){var n=function(){var e=this.tutorial.nextUrlInfo().url,i=this.tutorial.nextUrlInfo().forceRefresh;if(this._clear(!0),t&&e){var n=new h.a;i&&(n.evt=new o.a("",null,{forceRefresh:1})),l.default.navigate(e,n)}}.bind(this),r=function(){var e=this;return this.progressModule?this.progressModule.endMandatoryFlow().then(function(){e.progressModule&&e.progressModule.remove(),s.a.instance.updateNavigationBar()}):Promise.resolve()}.bind(this);(function(){var e=this,i=void 0;if(this.currentModule){i=(t?this.currentModule.completePlacedExperience():this.currentModule.dismissPlacedExperience()).fin(function(){return new Promise(function(t){e.currentModule.onExit(t)})}),this.currentModule.onTutorialComplete()}else i=Promise.resolve();return i}).bind(this)().then(r).then(n),t&&i.i(_.a)(this._funnelPrefix+"_complete")},_setStep:function e(t){var n=this;if(i.i(_.a)(this._funnelPrefix+"_"+t),v.debug("set step from",this.currentStep,"to",t),t!==this.currentStep){if(this.allStepNames.includes(t)||this.expiredSteps[t]||this._endTutorial(!0),this.expiredSteps[t]&&(t=this.expiredSteps[t]),this.currentStep=t,this._saveCurrentStep(),!this.currentModule)return void(this.renderModule&&this._loadModuleForStep(this.currentStep));this.currentModule.onExit(function(){n.currentModule.onRemoved(),n._loadModuleForStep(t)})}},_setNextStepClass:function e(t){var i=r()("body"),n=null,s=this._getStepIndex(t);s>0&&(n=this.allStepNames[s-1],i.removeClass(n+a.a.TUTORIAL_STEP_POSTFIX)),i.addClass(t+a.a.TUTORIAL_STEP_POSTFIX)},_updateProgressModuleStep:function e(){if(this.currentStep){var t=this._getStepIndex(this.currentStep);this._setNextStepClass(this.currentStep),this.progressModule&&this.progressModule.nextStep(t+1)}},_loadModuleForStep:function e(t){this.renderStepModule(t)},renderStepModule:function e(t){var i=this,n=this.getModuleArgs(t);t=t||this.tutorial.stepNames[0],p.a.load(n).then(function(e){var t=i.currentModule;i.currentModule=e,e.onEnter(function(){i._renderStepModule(e,t)})})},_renderStepModule:function e(t,i){var n=this;t.render().then(function(){var e=n.moduleContainer.children[0];n.moduleContainer.prependChild(t),e&&e.destroy(),t.onShow(n._updateProgressModuleStep())})},getModuleArgs:function e(t){var i=t,n={tutorial_name:this.tutorialName,current_step:this._getStepIndex(t),total_steps:this.numTotalSteps,can_exit:this.tutorial.canExit};return this.tutorial.stepExtraData&&this.tutorial.stepExtraData[t]&&(i=this.tutorial.stepExtraData[t].moduleName,Object.assign(n,this.tutorial.stepExtraData[t].options||{})),{name:i,options:n}},_getStepIndex:function e(t){var i=this.allStepNames.indexOf(t);return i!==-1?i:0},_getStoredStep:function e(){var t=this._getStoredData();return t&&t.name!==this.tutorialName&&(this._clearStoredData(),t=null),t&&t.step||null},_getStoredData:function e(){var t=f.a.sessionStorage.getItem(a.a.TUTORIAL_SESSION_KEY);return t&&t.experienceTutorial?null:t},_saveCurrentStep:function e(){f.a.sessionStorage.setItem(a.a.TUTORIAL_SESSION_KEY,{name:this.tutorialName,step:this.currentStep,experienceTutorial:!1})},_clear:function e(t){this.tutorial&&(this.stopTutorial(),t&&this._clearStoredData())},_clearStoredData:function e(){f.a.sessionStorage.removeItem(a.a.TUTORIAL_SESSION_KEY)}};var g=null;x.instance=function(){return g||(g=new x),g},t.default=x},969:function(e,t,i){"use strict";var n=i(47),r=i(40),s=function e(t,i){this.placedExperience=t,this.displayData=this.placedExperience.display_data,this.tutorialManager=i,this.storage={}};s.prototype={onStart:function e(){return new Promise(function(e,t){e(void 0)})},nextStep:function e(t){var i=this;return new Promise(function(e,n){i._removeStepModule().then(function(){i.loadStepModule(t),e(void 0)})})},loadStepModule:function e(t){var i=this,n=this.getModuleArgs(t);r.a.load(n).then(function(e){var t=i.currentModule;i.currentModule=e,e.onEnter(function(){i.renderStepModule(e,t)})})},getCurrentViewParameterType:function e(){return this.currentModule&&this.currentModule.getCurrentViewParameterType?this.currentModule.getCurrentViewParameterType():null},renderStepModule:function e(t,i){},_removeStepModule:function e(){var t=this.currentModule;return new Promise(function(e){t&&t.onExit(function(){t.onRemoved()}),e(void 0)})},getModuleArgs:function e(t){var i=this.displayData.steps,n=i[t].moduleName,r={tutorial_name:this.displayData.tutorialName,current_step:t,total_steps:i.length,can_exit:this.displayData.can_exit||!1,experienceID:this.placedExperience.experience_id,placementID:this.placedExperience.placement_id};return Object.assign(r,i[t].options),{name:n,options:r}},onExit:function e(){var t=this;return this._removeStepModule().then(function(){return t.currentModule&&t.currentModule.destroy(),Promise.resolve()})},dismissTutorial:function e(){this.tutorialManager&&this.tutorialManager.isRunningTutorial()&&this.tutorialManager._dismiss()},completePlacedExperience:function e(){return this.currentModule?this.currentModule.completePlacedExperience():this.placedExperience&&this.placedExperience.id?n.default.instance.completePlacedExperienceId(this.placedExperience.id):Promise.resolve()},dismissPlacedExperience:function e(){return this.currentModule?this.currentModule.dismissPlacedExperience():this.placedExperience&&this.placedExperience.id?n.default.instance.dismissPlacedExperienceId(this.placedExperience.id):Promise.resolve()},getStorage:function e(t){return this.storage[t]},setStorage:function e(t,i){this.storage[t]=i}},t.a=s}});