webpackJsonp([8],{1058:function(e,t,n){"use strict";function r(e){var t=e.body,n=void 0===t?"":t,r=e.img,a=e.onClick,o=e.selected,s=e.title,c=l()("ImageBlock","sendShareUserContact","selectable",{selected:o});return i.a.createElement("div",{className:c,onClick:a,role:"button"},i.a.createElement("div",{className:"left circle imageSize_sendShare"},r),i.a.createElement("div",{className:"right"},i.a.createElement("h4",{className:"imageBlockContentTitle"},s),i.a.createElement("div",{className:"imageBlockContentBody"},i.a.createElement("span",null,n))))}function a(e,t,a){if("user_share_suggestion"===e.type||"user"===e.type){var o=i.a.createElement("img",{alt:e.title,src:e.image_small_url});return i.a.createElement(r,{img:o,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return a(e)}),selected:t,title:e.full_name})}if("email"===e.type){var s=function(){var o=e.address,s=e.valid,l=s?i.a.createElement("span",{className:"icon"},o[0].toUpperCase()):i.a.createElement("span",{className:"icon typingEmail"},i.a.createElement("em",null)),u=n.i(p.dangerouslyFormat)(c.default._("Email {{ email }}"),{email:o}),d=s?c.default._("Click to send!"):c.default._("Keep typing!");return{v:i.a.createElement(r,{body:d,img:l,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return s?a(e):void 0}),selected:t,title:u})}}();if("object"===(void 0===s?"undefined":u(s)))return s.v}}var o=n(0),i=n.n(o),s=n(6),l=n.n(s),c=n(4),p=n(13);t.b=r,t.a=a;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}},1059:function(e,t,n){"use strict";function r(e){var t=e.email,r=e.isValid,a=e.onClick,i=e.showSendEmailText,p=r?o.a.createElement("div",{className:"icon"},t[0].toUpperCase()):o.a.createElement("div",{className:s()("icon","typingEmail")},o.a.createElement("em",null)),u=r?l.default._("Click to send!"):l.default._("Keep typing!"),d=i?n.i(c.safeFormat)(l.default._("Email {{ email }}"),{email:t}):n.i(c.safeFormat)(l.default._("Invite {{ email }}"),{email:t});return o.a.createElement("div",{className:s()("sendToEmail",{unclickable:!r})},o.a.createElement("a",{className:"selectableEmailItem",onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){r&&a()}),role:"button"},o.a.createElement("div",{className:"left"},p),o.a.createElement("div",{className:"right"},o.a.createElement("h4",{className:"title"},d),o.a.createElement("p",{className:"subtitle"},u))))}var a=n(0),o=n.n(a),i=n(6),s=n.n(i),l=n(4),c=n(13);t.a=r,r.propTypes={email:a.PropTypes.string.isRequired,isValid:a.PropTypes.bool.isRequired,onClick:a.PropTypes.func.isRequired,showSendEmailText:a.PropTypes.bool.isRequired}},1060:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(74),c=n(1823),p=n(12),u=n(692),d=n(9),m=n(6),h=n.n(m),f=n(29),y=n(4),g=n(28),v=n(740),b=n(169),T=n(68),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.handleChangeName=function(e){var t=l.getErrors(o.nameValidators,e),n=null;o.setState({name:e,nameValidatorErrors:t,submitError:null})},o.handleChangeDescription=function(e){var t=l.getErrors(o.descriptionValidators,e);o.setState({description:e,descriptionValidatorErrors:t})},o.handleChangeCategory=function(e){var t=e.target.value;o.setState({category:t})},o.handleChangePrivateToggle=function(e){o.setState({privacy:e?"secret":"public"})},o.handleChangeCollabBoardEmail=function(e){o.setState({collab_board_email:e})},o.handleChangeCollaboratorInvitesEnabled=function(e){o.setState({collaboratorInvitesEnabled:e})},o.handleCancel=function(){f.a.trackEvent(o.props.gaCategory,"click_cancel"),o.props.onClose()},o.handleSubmit=function(e){e&&e.preventDefault(),o.submitDisabled()||(o.setState({saving:!0}),f.a.trackEvent(o.props.gaCategory,"click_submit"),o.props.onSubmit(o.fieldValues).catch(function(e){"string"!=typeof e&&(e=y.default._("Uh oh! Something went wrong.")),o.setState({saving:!1,submitError:e})}))},o.handleDelete=function(){o.setState({deleting:!0}),o.props.onDeleteButtonClick()},o.handleShowBoardCoverEditModal=function(){o.setState({showBoardCoverEdit:!0})},o.handleHideBoardCoverEditModal=function(){o.setState({showBoardCoverEdit:!1})},o.handleSaveBoardCoverEditModal=function(){var e;o.handleHideBoardCoverEditModal(),(e=o.props).onCropChange.apply(e,arguments)},o.state=E({},n.board,{collaboratorInvitesEnabled:n.board.collaborator_invites_enabled||!1,deleting:!1,nameValidatorErrors:[],descriptionValidatorErrors:[],saving:!1,showBoardCoverEdit:!1,showDeleteConfirmation:!1,submitError:null}),o.descriptionValidators=[l.Length({max:d.a.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION})],o.nameValidators=[l.Required({message:y.default._("Don't forget to name your board!")}),l.Length({max:d.a.MAX_CHARS_FOR_BOARD_TITLE})],o}return o(t,e),t.prototype.getBoardTitleInput=function e(){var t=this.state,n=t.name,r=t.nameValidatorErrors;return s.a.createElement("li",null,s.a.createElement("h3",null,s.a.createElement("label",{className:h()({hasError:r.length>0}),htmlFor:"boardEditName"},y.default._("Name"))),s.a.createElement("div",null,s.a.createElement(T.a,{className:"boardEditName "+(r.length>0?"hasError":""),id:"boardEditName",name:"boardName",onChange:this.handleChangeName,placeholder:y.default._('Like "Places to Go" or "Recipes to Make."'),type:"text",value:n}),r.map(function(e,t){return s.a.createElement("p",{className:h()("formFieldMessage","formErrorMessage"),key:t},e)})))},t.prototype.getCategoriesDropdown=function e(){var t=this.props.categories,n={key:"other",name:y.default._("What kind of board is it?")},r=[n].concat(t),a=this.state.category||"";return s.a.createElement("li",{className:"categoryWrapper"},s.a.createElement("h3",null,s.a.createElement("label",{htmlFor:"boardEditCategory"},y.default._("Category"))),s.a.createElement("div",null,s.a.createElement(v.a,{id:"boardEditCategory",name:"category",onChange:this.handleChangeCategory,options:r,value:a})))},t.prototype.getCollaboratorsEmailCheckbox=function e(){var t=this.props.board,n=this.state.collab_board_email;return t.is_collaborative?s.a.createElement("li",null,s.a.createElement("h3",null,s.a.createElement("label",null,y.default._("Email notifications"))),s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement(u.a,{checked:n,id:"emailCheckbox",name:"email",onChange:this.handleChangeCollabBoardEmail,type:"fancyToggle"})),s.a.createElement("span",{className:"learnMore"},y.default._("Get an email when someone saves Pins to this board")))):null},t.prototype.getCollaboratorsInviteList=function e(){var t=this.props,n=t.boardCollaboratorsSection,r=t.showCollaboratorsLearnMore;return s.a.createElement("li",{className:"boardCollaboratorsWrapper"},s.a.createElement("h3",null,s.a.createElement("label",null,y.default._("Collaborators")),r?s.a.createElement("a",{className:h()("external","learnMore","learnAboutBoardInvites"),href:d.a.GEN.templateConst.settings.HELP_BOARDS_INVITE_URL_SRC_CREATE},y.default._("Learn more")):null),s.a.createElement("div",{className:"fieldWrapper"},n))},t.prototype.getCollaboratorsInviteToggle=function e(){var t=this.props.board,n=this.state.collaboratorInvitesEnabled;return t.is_collaborative?s.a.createElement("li",{className:"collaboratorInvitesEnabledToggleWrapper"},s.a.createElement("h3",null,s.a.createElement("label",{htmlFor:"place"},y.default._("Let collaborators add people"))),s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement(u.a,{checked:n,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:this.handleChangeCollaboratorInvitesEnabled,type:"fancyToggle"})))):null},t.prototype.getCoverEdit=function e(){var t=this.props,n=t.coverImageHeight,r=t.coverImageWidth,a=t.isEditable,o=this.state,i=o.id,l=o.name,u=o.pin_count;return a&&u>0?s.a.createElement("li",{className:"boardEditCover"},s.a.createElement("h3",null,y.default._("Cover")),s.a.createElement("div",null,s.a.createElement(p.a,{className:"boardCoverEditButton",onClick:this.handleShowBoardCoverEditModal,rounded:!0,text:y.default._("Change")}),this.state.showBoardCoverEdit?s.a.createElement(g.a,{onHide:this.handleHideBoardCoverEditModal},s.a.createElement(c.a,{boardId:i,boardName:l,frameHeight:n,frameWidth:r,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal})):null)):null},t.prototype.getDescriptionInput=function e(){var t=this.state,n=t.description,r=t.descriptionValidatorErrors;return s.a.createElement("li",{className:"descriptionWrapper"},s.a.createElement("h3",null,s.a.createElement("label",{className:h()({hasError:r.length>0}),htmlFor:"boardEditDescription"},y.default._("Description"))),s.a.createElement("div",null,s.a.createElement(b.a,{className:h()("boardEditDescription",{hasError:r.length>0}),id:"boardEditDescription",name:"description",onChange:this.handleChangeDescription,placeholder:y.default._("What's your board about?"),value:n}),r.map(function(e,t){return s.a.createElement("p",{className:h()("formFieldMessage","formErrorMessage"),key:t},e)})))},t.prototype.getFormFooter=function e(){var t=this.state,n=t.deleting,r=t.saving,a=t.submitError,o=this.props,i=o.isDeletable,l=o.submitText;return s.a.createElement("div",{className:"formFooter"},i?s.a.createElement("div",{className:"formFooterDelete"},s.a.createElement(p.a,{className:"deleteBoardButton",id:"deleteBoardButton",loading:n,onClick:this.handleDelete,text:y.default._("Delete board")})):null,a?s.a.createElement("span",{className:"formFieldMessage",style:{lineHeight:"30px"}},a):null,s.a.createElement("div",{className:"formFooterButtons"},s.a.createElement(p.a,{className:"cancelButton",id:"cancelButton",onClick:this.handleCancel,text:y.default._("Cancel")}),s.a.createElement(p.a,{className:"saveBoardButton",disabled:this.submitDisabled(),id:"submitButton",loading:r,onClick:this.handleSubmit,text:l,type:"primary"})))},t.prototype.getSecretToggle=function e(){var t=this.props.showSecretBoardsLearnMore,n=this.state.privacy;return s.a.createElement("li",{className:"secretToggleWrapper"},s.a.createElement("h3",null,s.a.createElement("label",{htmlFor:"secret"},y.default._("Secret")),t?s.a.createElement("a",{className:h()("external","learnMore","learnAboutBoardInvites"),href:d.a.GEN.templateConst.settings.HELP_BOARDS_SECRET_URL_SRC_CREATE},y.default._("Learn more")):null),s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement(u.a,{checked:"protected"===n||"secret"===n,id:"secret",name:"secret",onChange:this.handleChangePrivateToggle,type:"fancyToggle"}))))},t.prototype.getBoardFormFields=function e(){var t=this.props,n=t.currentUserIsOwner,r=t.isNameAndSecretView;return n?r?s.a.createElement("ul",null,this.getBoardTitleInput(),this.getSecretToggle()):s.a.createElement("ul",null,this.getBoardTitleInput(),this.getDescriptionInput(),this.getCategoriesDropdown(),this.getCoverEdit(),this.getSecretToggle(),this.getCollaboratorsInviteList(),this.getCollaboratorsEmailCheckbox(),this.getCollaboratorsInviteToggle()):s.a.createElement("ul",null,this.getCollaboratorsInviteList(),this.getCollaboratorsEmailCheckbox())},t.prototype.submitDisabled=function e(){var t=this.state,n=t.descriptionValidatorErrors,r=t.name,a=t.nameValidatorErrors,o=t.submitError;return o&&o.length>0||!r||a.length>0||n.length>0},t.prototype.render=function e(){return s.a.createElement("form",{className:"standardForm",method:"post",onSubmit:this.handleSubmit},s.a.createElement("h1",null,this.props.title),this.getBoardFormFields(),this.getFormFooter())},P(t,[{key:"fieldValues",get:function e(){return{name:this.state.name,description:this.state.description,category:this.state.category,privacy:this.state.privacy,collab_board_email:this.state.collab_board_email,collaborator_invites_enabled:this.state.collaboratorInvitesEnabled}}}]),t}(i.Component);_.propTypes={board:i.PropTypes.shape({name:i.PropTypes.string,description:i.PropTypes.string.isRequired,id:i.PropTypes.string.isRequired,owner:i.PropTypes.shape({username:i.PropTypes.string.isRequired}).isRequired,pin_count:i.PropTypes.number.isRequired,privacy:i.PropTypes.oneOf(["public","protected","secret"]).isRequired,category:i.PropTypes.string,is_collaborative:i.PropTypes.bool.isRequired,collab_board_email:i.PropTypes.bool,collaborator_invites_enabled:i.PropTypes.bool}).isRequired,boardCollaboratorsSection:i.PropTypes.node.isRequired,categories:i.PropTypes.arrayOf(i.PropTypes.shape({key:i.PropTypes.string.isRequired,name:i.PropTypes.string.isRequired})).isRequired,coverImageHeight:i.PropTypes.number,coverImageWidth:i.PropTypes.number,currentUserIsOwner:i.PropTypes.bool.isRequired,gaCategory:i.PropTypes.string.isRequired,isDeletable:i.PropTypes.bool.isRequired,isEditable:i.PropTypes.bool.isRequired,isNameAndSecretView:i.PropTypes.bool,onClose:i.PropTypes.func.isRequired,onCropChange:i.PropTypes.func,onDeleteButtonClick:i.PropTypes.func,onSubmit:i.PropTypes.func.isRequired,showCollaboratorsLearnMore:i.PropTypes.bool.isRequired,showSecretBoardsLearnMore:i.PropTypes.bool.isRequired,submitText:i.PropTypes.string.isRequired,title:i.PropTypes.node.isRequired},_.defaultProps={isNameAndSecretView:!1,showCollaboratorsLearnMore:!0,showSecretBoardsLearnMore:!0},t.a=_},1106:function(e,t,n){var r=n(1110),a=n(280),o=n(245),i=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=i},1107:function(e,t,n){function r(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=o(r.length-t,0),l=Array(s);++i<s;)l[i]=r[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=r[i];return c[t]=n(l),a(e,this,c)}}var a=n(926),o=Math.max;e.exports=r},1108:function(e,t,n){var r=n(1106),a=n(1109),o=a(r);e.exports=o},1109:function(e,t){function n(e){var t=0,n=0;return function(){var i=o(),s=a-(i-n);if(n=i,s>0){if(++t>=r)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var r=800,a=16,o=Date.now;e.exports=n},1110:function(e,t){function n(e){return function(){return e}}e.exports=n},1115:function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,a=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[a++]=i)}return o}e.exports=n},1144:function(e,t,n){"use strict";function r(e){u.a.instance().handleConnect(e,!0,{})}function a(e){var t,n=e.network,a=(t={},t[d]=c.default._("Find friends from Facebook"),t[m]=c.default._("Find friends from Google+"),t[h]=c.default._("Find friends from Twitter"),t[f]=c.default._("Find friends from Yahoo"),t);return i.a.createElement("div",{className:"socialConnect"},i.a.createElement("a",{onClick:function e(){return r(n)},role:"button"},i.a.createElement("div",{className:"left"},i.a.createElement("div",{className:l()("icon","socialConnect-"+n)},i.a.createElement("em",null))),i.a.createElement("div",{className:"right"},i.a.createElement("h4",{className:"title"},a[n]))))}var o=n(0),i=n.n(o),s=n(6),l=n.n(s),c=n(4),p=n(80),u=n(183);t.a=a;var d=p.default.FACEBOOK,m=p.default.GPLUS,h=p.default.TWITTER,f=p.default.YAHOO;a.propTypes={network:o.PropTypes.oneOf([d,m,h,f]).isRequired}},1384:function(e,t){function n(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}e.exports=n},1495:function(e,t,n){var r=n(2198),a=r();e.exports=a},1789:function(e,t,n){function r(e,t,n){return t===t?i(e,t,n):a(e,o,n)}var a=n(1384),o=n(1790),i=n(1791);e.exports=r},1790:function(e,t){function n(e){return e!==e}e.exports=n},1791:function(e,t){function n(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}e.exports=n},1819:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t,n){var r=e.id;return t===n.findIndex(function(e){return e.id===r})}var s=n(0),l=n.n(s),c=n(4),p=n(1820),u=n(1821),d=n(68),m=n(201),h=n(20),f=n(13),y=n(1058),g=function(e){function t(){var n,o,i;r(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=o=a(this,e.call.apply(e,[this].concat(l))),o.state={selectedCollaborators:[],showSocialConnectPanel:!1,typeaheadSuggestions:[],value:""},o.handleTextFieldChange=function(e){o.setState({value:e})},o.handleCloseSocialConnectPanel=function(){o.setState({showSocialConnectPanel:!1})},o.handleCollaboratorClick=function(e){var t=e.id;o.isIdSelected[t]=!o.isIdSelected[t];var n=o.state.selectedCollaborators,r=n.concat([e]);o.props.onSelectedCollaboratorsChange(r.filter(function(e){var t=e.id;return o.isIdSelected[t]})),o.setState({selectedCollaborators:r})},o.handleShowSocialConnectPanel=function(){o.setState({showSocialConnectPanel:!0})},o.handleTypeaheadSuggestionsChange=function(e){o.setState({typeaheadSuggestions:e})},o.isIdSelected={},i=n,a(o,i)}return o(t,e),t.prototype.render=function e(){var t=this;if(this.state.showSocialConnectPanel)return l.a.createElement(u.a,{onClose:this.handleCloseSocialConnectPanel,user:this.props.user});var r=this.state.value,a=""===r?this.props.shareSuggestions:this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:"email-"+r,address:r,valid:n.i(f.isEmailAddress)(r)}).concat(this.props.shareSuggestions).filter(i),o=a.map(function(e,r){return n.i(y.a)(e,t.isIdSelected[e.id],t.handleCollaboratorClick)}).concat(l.a.createElement(p.a,{message:""===r?c.default._("Choose from contacts"):c.default._("Find people you know"),onClick:this.handleShowSocialConnectPanel})).map(function(e,t){return l.a.createElement("li",{key:t},e)});return l.a.createElement(m.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:r},l.a.createElement(d.a,{onChange:this.handleTextFieldChange,placeholder:c.default._("Name or email"),value:r}),l.a.createElement("div",{className:"ContactsList Typeahead sendShare fullWidth flexible compact open"},l.a.createElement("ul",{className:"results"},o)))},t}(s.Component);g.propTypes={onSelectedCollaboratorsChange:s.PropTypes.func.isRequired,resourceLoaded:s.PropTypes.bool.isRequired,shareSuggestions:s.PropTypes.arrayOf(s.PropTypes.shape({id:s.PropTypes.string})).isRequired,user:s.PropTypes.shape({connected_to_google:s.PropTypes.bool,connected_to_yahoo:s.PropTypes.bool,email:s.PropTypes.string,facebook_url:s.PropTypes.string,twitter_url:s.PropTypes.string})},g.defaultProps={shareSuggestions:[]},t.a=n.i(h.a)({name:"ShareSuggestionsResource",key:"shareSuggestions"},{allowStale:!1})(g)},1820:function(e,t,n){"use strict";function r(e){return o.a.createElement(i.b,{img:o.a.createElement("em",{className:"icon socialConnectCta"}),onClick:e.onClick,selected:!1,title:e.message})}var a=n(0),o=n.n(a),i=n(1058);t.a=r},1821:function(e,t,n){"use strict";function r(e){f.a.instance().handleConnect(e,!0,{})}function a(e){return e===y?m.default._("Facebook"):e===v?m.default._("Twitter"):e===g?m.default._("Google"):e===b?m.default._("Yahoo"):m.default._("Other")}function o(e,t){if(e===y)return m.default._("Friends who are on Pinterest");if(e===g){if(t&&t.indexOf("@gmail")!==-1)return t}else if(e===b&&t&&t.indexOf("@yahoo")!==-1)return t;return null}function i(e){var t=u()("SocialNetworkConnectButton","listItem","sendShare",e.network),n=o(e.network,e.email);return c.a.createElement("a",{onClick:e.onClick,role:"button"},c.a.createElement("div",{className:t},c.a.createElement("em",{className:"icon"}),c.a.createElement("div",{className:"networkInfo"},c.a.createElement("h4",{className:"title"},a(e.network)),n?c.a.createElement("div",{className:"subtitle"},n):null)))}function s(e){var t=n.i(d.a)(e.user),a=T.filter(function(e){return t[e].connected===!1});return c.a.createElement("div",{className:"SocialConnectPanel fullWidth compact sendShare"},c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"backNav"},c.a.createElement("a",{onClick:e.onClose,role:"button"},c.a.createElement("span",{className:"icon"}),c.a.createElement("span",{className:"label"},m.default._("Back")))),c.a.createElement("div",{className:"prompt"},m.default._("Upload contacts from..."))),c.a.createElement("ul",{className:"socialConnectOptions"},a.map(function(t){return c.a.createElement("li",{key:t},c.a.createElement(i,{email:e.user.email,network:t,onClick:function e(){return r(t)}}))})))}var l=n(0),c=n.n(l),p=n(6),u=n.n(p),d=n(698),m=n(4),h=n(80),f=n(183);t.a=s;var y=h.default.FACEBOOK,g=h.default.GOOGLE,v=h.default.TWITTER,b=h.default.YAHOO,T=[y,v,g,b]},1822:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(6),c=n.n(l),p=n(207),u=n(4),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.componentWillReceiveProps=function e(t){!this.props.isHovering&&t.isHovering?this.props.onHoverStart():this.props.isHovering&&!t.isHovering&&this.props.onHoverEnd()},t.prototype.render=function e(){var t=this.props,n=t.is_pinner?u.default._("On Pinterest"):t.email?t.email:"facebook_non_pinner"===t.type?u.default._("Facebook"):"gplus_non_pinner"===t.type?u.default._("Google"):u.default._("Enter an email address");return s.a.createElement("a",d({},this.props.hoverHandlers,{onClick:this.props.onClick,role:"button"}),t.send_pin_image?s.a.createElement("span",{className:"typeaheadImg"},s.a.createElement("img",{alt:"",src:t.send_pin_image})):null,s.a.createElement("p",{className:c()("typeaheadName",{hasImage:t.send_pin_image})},t.label),s.a.createElement("div",{className:"titleWrapper"},s.a.createElement("i",{className:c()("titleIcon",{isPinner:t.is_pinner},{isFacebook:"facebook_non_pinner"===t.type},{isGplus:"gplus_non_pinner"===t.type})}),s.a.createElement("p",{className:"title"},n)))},t}(i.Component);m.propTypes={email:i.PropTypes.bool,hoverHandlers:i.PropTypes.objectOf(i.PropTypes.func).isRequired,is_pinner:i.PropTypes.bool,isHovering:i.PropTypes.bool.isRequired,label:i.PropTypes.string,onClick:i.PropTypes.func.isRequired,onHoverEnd:i.PropTypes.func.isRequired,onHoverStart:i.PropTypes.func.isRequired,send_pin_image:i.PropTypes.string,type:i.PropTypes.oneOf(["user","facebook_non_pinner","gplus_non_pinner"]).isRequired},t.a=n.i(p.a)(m)},1823:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e.boardId,a=r(e,["boardId"]);return n.i(l.createElement)(n.i(y.a)({name:"BoardFeedResource",options:{board_id:t,page_size:50,field_set_key:"board_cover_picker"},key:"pins"},{allowStale:!1})(v),g({boardId:t},a))}var l=n(0),c=n.n(l),p=n(1824),u=n(12),d=n(29),m=n(4),h=n(5),f=n.n(h),y=n(20);t.a=s;var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(e){function t(){var n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=r=o(this,e.call.apply(e,[this].concat(l))),r.state={coverPinIndex:0,imgCropData:{},isSaving:!1},r.handleSave=function(){r.setState({isSaving:!0});var e=r.props,t=e.pins,n=void 0===t?{}:t,a=e.boardId,o=r.state,i=o.coverPinIndex,s=o.imgCropData,l=n[i],c=l.images["236x"],p=c.url;d.a.trackEvent("board_edit_cover","click_submit");var u=g({pin_id:l.id,pin_image_url:p},s),m=g({board_id:a,url:p},u);f.a.create("BoardResource",m).callUpdate().then(function(){d.a.trackEvent("board_edit_cover","success"),r.setState({isSaving:!1}),r.props.onSave(p,{height:c.height,width:c.width,x:s.crop_x,y:s.crop_y})}).catch(function(){r.setState({isSaving:!1})})},r.updateImgCrop=function(e){r.setState({imgCropData:e})},i=n,o(r,i)}return i(t,e),t.prototype.componentDidUpdate=function e(t){var n=this.props.pins,r=t.pins;(n&&r!==n&&n.length||n&&r&&n.length!==r.length)&&n.forEach(function(e){(new Image).src=e.url})},t.prototype.changePin=function e(t){t<0||t>=this.props.pins.length||this.setState({coverPinIndex:t})},t.prototype.render=function e(){var t=this,n=this.props,r=n.boardName,a=n.frameHeight,o=n.frameWidth,i=n.pins,s=this.state,l=s.coverPinIndex,d=s.isSaving;return i?c.a.createElement("div",{className:"BoardCoverEditPage"},c.a.createElement("div",{className:"standardForm"},c.a.createElement("h1",null,c.a.createElement("strong",null,m.default._("Change Board Cover"))," / "+r),c.a.createElement("div",{className:"boardCoverEditPageContainer"},c.a.createElement("div",{className:"BoardCoverEdit"},c.a.createElement(p.a,{boardName:r,frameHeight:a,frameWidth:o,isFirst:!l,isLast:l===i.length-1,pin:i[l],showNextPin:function e(){t.changePin(l+1)},showPrevPin:function e(){t.changePin(l-1)},updateImgCrop:this.updateImgCrop})),c.a.createElement("div",{className:"formFooter"},c.a.createElement("div",{className:"formFooterButtons"},c.a.createElement(u.a,{isSaving:d,onClick:this.props.onCancel,text:m.default._("Cancel")}),c.a.createElement(u.a,{onClick:this.handleSave,text:m.default._("Save Changes"),type:"primary"})))))):null},t}(l.Component);v.propTypes={boardId:l.PropTypes.string.isRequired,boardName:l.PropTypes.string.isRequired,frameHeight:l.PropTypes.number,frameWidth:l.PropTypes.number,onCancel:l.PropTypes.func.isRequired,onSave:l.PropTypes.func.isRequired,pins:l.PropTypes.arrayOf(l.PropTypes.shape({id:l.PropTypes.string,images:l.PropTypes.shape({"236x":l.PropTypes.shape({url:l.PropTypes.string.isRequired})})}))},s.propTypes={boardId:l.PropTypes.string.isRequired}},1824:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(13),c=n(12),p=n(4),u="236x",d=function(e){function t(){var n,o,i;r(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=o=a(this,e.call.apply(e,[this].concat(l))),o.state={deltaY:0,deltaX:0,holderHeight:0,holderWidth:0,isSpinnerShown:!0,startBgPos:{left:0,top:0}},o.handleUpdateImage=function(){var e=o.image,t=e.offsetHeight,n=e.offsetWidth;o.setState({isSpinnerShown:!1,startBgPos:{left:-(n-o.state.holderWidth)/2,top:-(t-o.state.holderHeight)/2}})},o.handleOnMouseUp=function(){o.isDragging=!1,o.setState({startBgPos:{left:o.getBgLeft(),top:o.getBgTop()},deltaX:0,deltaY:0}),o.props.updateImgCrop(o.getCropData())},i=n,a(o,i)}return o(t,e),t.prototype.componentDidMount=function e(){var t=this.holder;this.setState({holderHeight:t.offsetHeight,holderWidth:t.offsetWidth}),document.body.addEventListener("mouseup",this.handleOnMouseUp,!1)},t.prototype.componentWillReceiveProps=function e(t){t.pin.id!==this.props.pin.id&&this.setState({isSpinnerShown:!0})},t.prototype.componentWillUnmount=function e(){document.body.removeEventListener("mouseup",this.handleOnMouseUp)},t.prototype.getFrameBounds=function e(){var t=this.props,n=t.frameHeight,r=t.frameWidth,a=this.state,o=a.holderHeight;return{left:a.holderWidth/2-r/2,width:r,height:n,top:o/2-n/2}},t.prototype.getBgLeft=function e(){var t=this.props.frameWidth,n=this.getFrameBounds(),r=this.getImgScale(),a=this._getImageDimensions(),o=a.imgHeight*r,i=a.imgWidth*r,s=0;return o&&i&&(s=this.state.startBgPos.left+this.state.deltaX,s+i-t<n.left&&(s=n.left-i+t),s>n.left&&(s=n.left)),s},t.prototype.getBgTop=function e(){var t=this.props.frameHeight,n=this.getFrameBounds(),r=this.getImgScale(),a=this._getImageDimensions(),o=a.imgHeight*r,i=a.imgWidth*r,s=0;return o&&i&&(s=this.state.startBgPos.top+this.state.deltaY,s+o-t<n.top&&(s=n.top-o+t),s>n.top&&(s=n.top)),s},t.prototype.getImgScale=function e(){var t=this.props,n=t.frameHeight,r=t.frameWidth,a=this._getImageDimensions(),o=a.imgHeight,i=a.imgWidth,s=this.getFrameBounds();if(o&&i){var l=o/i;return l=l>=s.height/s.width?r/i:n/o}return 1},t.prototype.getImageBounds=function e(){var t=this._getImageDimensions(),n=t.imgHeight,r=t.imgWidth,a={};if(n&&r){var o=this.getImgScale();a={width:o*r,height:o*n}}return a},t.prototype.getBgBounds=function e(){return{left:this.getBgLeft(),top:this.getBgTop()}},t.prototype.getCropData=function e(){var t=this.props,n=t.frameHeight,r=t.frameWidth,a=this.getFrameBounds(),o=this._getImageDimensions(),i=o.imgHeight,s=o.imgWidth,l=this.getBgBounds(),c=this.getImgScale();return{crop_x:Math.round(-(l.left-a.left)/c),crop_y:Math.round(-(l.top-a.top)/c),nativeHeight:i,nativeWidth:s,height:Math.round(n/c),width:Math.round(r/c),scale:1}},t.prototype.handleOnMouseDown=function e(t){0===t.nativeEvent.button&&(t.stopPropagation(),this.isDragging=!0,this.originX=t.pageX,this.originY=t.pageY)},t.prototype.handleOnMouseMove=function e(t){this.isDragging&&this.setState({deltaX:t.pageX-this.originX,deltaY:t.pageY-this.originY})},t.prototype._getImageDimensions=function e(){var t=this.props.pin,n=t.images["236x"]
;return{imgHeight:n.height,imgWidth:n.width}},t.prototype.render=function e(){var t=this,n=this.props,r=n.boardName,a=n.frameHeight,o=n.frameWidth,i=n.isFirst,u=n.isLast,d=n.pin,m=n.showNextPin,h=n.showPrevPin,f=this.state.isSpinnerShown,y=this._getImageDimensions(),g=y.imgHeight,v=y.imgWidth,b=this.getFrameBounds(),T=this.getImageBounds(),E=this.getBgBounds(),P="";return g&&v&&(P="in"),s.a.createElement("div",{className:"ImageCrop"},s.a.createElement("div",{className:"holder",ref:function e(n){t.holder=n}},s.a.createElement("div",{className:"bg",style:E},s.a.createElement("img",{alt:l.dangerouslyFormat(p.default._("Board cover for {{ boardName }}"),{boardName:r}),className:P,onLoad:this.handleUpdateImage,ref:function e(n){t.image=n},src:d.images["236x"].url,style:T})),s.a.createElement("div",{className:"mask"},s.a.createElement("span",{style:{top:0,left:0,right:0,height:b.top}}),s.a.createElement("span",{style:{top:b.top,left:b.left+o,right:0,height:a}}),s.a.createElement("span",{style:{top:a+b.top,left:0,right:0,bottom:0}}),s.a.createElement("span",{style:{top:b.top,left:0,width:b.left,height:a}})),s.a.createElement("div",{className:"frame",style:b}),s.a.createElement("div",{className:"drag",onMouseDown:function e(n){t.handleOnMouseDown(n)},onMouseMove:function e(n){t.handleOnMouseMove(n)}}),s.a.createElement("div",{className:"spinner",style:{display:f?"":"none"}})),i?null:s.a.createElement(c.a,{className:"previous",onClick:h,text:""}),u?null:s.a.createElement(c.a,{className:"next",onClick:m,text:""}))},t}(i.Component);d.propTypes={boardName:i.PropTypes.string,frameHeight:i.PropTypes.number,frameWidth:i.PropTypes.number,isFirst:i.PropTypes.bool.isRequired,isLast:i.PropTypes.bool.isRequired,pin:i.PropTypes.shape({id:i.PropTypes.string,images:i.PropTypes.shape({"236x":i.PropTypes.shape({height:i.PropTypes.number.isRequired,url:i.PropTypes.string.isRequired,width:i.PropTypes.number.isRequired})})}),showNextPin:i.PropTypes.func.isRequired,showPrevPin:i.PropTypes.func.isRequired,updateImgCrop:i.PropTypes.func.isRequired},d.defaultProps={frameHeight:111,frameWidth:236},t.a=d},183:function(e,t,n){"use strict";function r(){}var a=n(58),o=n(7),i=n(5),s=n.n(i),l=n(80),c=n(36),p=n(15),u=1e3,d=110;Object.assign(r.prototype,{handleConnect:function e(t,n,r){if(n&&!p.a.isLimitedLogin()){var a={success:function(e){var a={network:t,data:e};this._internalConnectNetwork(n,a,r)}.bind(this),error:function e(t){r.error&&r.error(t)},complete:function e(){r.complete&&r.complete()}};this._externalConnectNetwork(t,n,a)}else{var o={network:t};this._internalConnectNetwork(n,o,r)}},updateConnectStatus:function e(){s.a.create("UserResource",{user_id:p.a.get("id"),username:p.a.get("username"),field_set_key:"social_connect"}).callGet().then(function(e){var t=e.resource_response.data;p.a.set(t),o.a.instance.publish("currentUser","socialNetworkUpdated",t)})},_externalConnectNetwork:function e(t,n,r){if(!n)return void(r.success&&r.success({}));l.default.instance().connect(t,r)},_internalConnectNetwork:function e(t,n,r){var a=this,o=s.a.create("UserSocialNetworkResource",n);(t?o.callCreate():o.callDelete()).then(function(e){a.updateConnectStatus(),r.success&&r.success(e)},function(e){r.error&&e instanceof Object&&r.error(e)}).fin(function(){r.complete&&r.complete()})},_getResourceNameForNetworkFriends:function e(t){var n=null;switch(t){case l.default.FACEBOOK:n="UserFacebookFriendsResource";break;case l.default.TWITTER:n="UserTwitterFriendsResource";break;case l.default.GOOGLE:n="UserGmailFriendsResource";break;case l.default.YAHOO:n="UserYahooFriendsResource";break;case l.default.MICROSOFT:n="UserMicrosoftFriendsResource";break;default:return}return n},_handleFriendsImported:function e(t,n,r){var a={resource:n,network:t,error:r};o.a.instance.publish("site","friendImportCompleted",a)},pollForFriends:function e(t,n){var r=this;n=n||{};var a=n.resourceOptions||{},o=this._getResourceNameForNetworkFriends(t);if(o){var i=s.a.create(o,a);i.callGet({showError:!1}).then(function(){var e=n.success;e&&e(i),r._handleFriendsImported(t,i,null)},function(e){if(110===e.api_error_code)c.a.setTimeout(function(){r.pollForFriends(t,n)},1e3);else{var a=n.error;a&&a(),r._handleFriendsImported(t,i,e)}})}}});var m=null;r.instance=function(){return m||(m=new r),m},t.a=a.a.expose("SocialNetworkSettingsManager",r)},1830:function(e,t,n){var r=n(259),a=n(1832),o=a(r);e.exports=o},1831:function(e,t,n){function r(e,t){var n=[];return a(e,function(e,r,a){t(e,r,a)&&n.push(e)}),n}var a=n(1830);e.exports=r},1832:function(e,t,n){function r(e,t){return function(n,r){if(null==n)return n;if(!a(n))return e(n,r);for(var o=n.length,i=t?o:-1,s=Object(n);(t?i--:++i<o)&&r(s[i],i,s)!==!1;);return n}}var a=n(151);e.exports=r},1833:function(e,t,n){function r(e,t){return(s(e)?a:o)(e,i(t,3))}var a=n(1115),o=n(1831),i=n(233),s=n(50);e.exports=r},1890:function(e,t,n){function r(e){if(!e)return 0===e?e:0;if((e=a(e))===o||e===-o){return(e<0?-1:1)*i}return e===e?e:0}var a=n(321),o=1/0,i=1.7976931348623157e308;e.exports=r},2042:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=n.i(h.a)({name:e.resourceName,options:y({page_size:e.pageSize},e.resourceOptions)})(b);return l.a.createElement(t,e)}var s=n(0),l=n.n(s),c=n(6),p=n.n(c),u=n(4),d=n(98),m=n.n(d),h=n(20),f=n(8);t.a=i;var y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g={UP:"up",DOWN:"down"},v=100,b=function(e){function t(){var n,o,i;r(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=o=a(this,e.call.apply(e,[this].concat(l))),o.handleScroll=m()(function(){if(!o.props.isFetching){var e=o.props.scrollThreshold;o._container.scrollHeight-o._container.scrollTop-o._container.clientHeight<e&&o.fetchMore()}},v),o.addEventListeners=function(e){var t=o.props.shouldPreventScroll;o.removeEventListeners(),e&&(t&&e.addEventListener("wheel",o.preventScroll),e.addEventListener("scroll",o.handleScroll)),o._container=e},o.preventScroll=function(e){var t=e.deltaY<0?g.UP:g.DOWN,n=o._container.scrollHeight-o._container.scrollTop-o._container.clientHeight==0,r=0===o._container.scrollTop;(t===g.DOWN&&n||t===g.UP&&r)&&e.preventDefault()},i=n,a(o,i)}return o(t,e),t.prototype.componentWillReceiveProps=function e(t){var n=t.data.length;(0,t.onDataFetched)(n)},t.prototype.componentWillUnmount=function e(){this.removeEventListeners()},t.prototype.removeEventListeners=function e(){var t=this.props.shouldPreventScroll;this._container&&(t&&this._container.removeEventListener("wheel",this.preventScroll),this._container.removeEventListener("scroll",this.handleScroll))},t.prototype.fetchMore=function e(){this.props.isFetching||(this.props.isAtEnd?this._container.removeEventListener("scroll",this.handleScroll):this.props.fetchMoreData())},t.prototype.render=function e(){var t=this.props,n=t.className,r=t.renderEmptyState,a=t.renderItem;return this.props.isFetching||0!==this.props.data.length?l.a.createElement("div",{className:p()(n,"listContainer"),ref:this.addEventListeners},this.props.data?l.a.createElement("ul",{className:"scrollableList"},this.props.data.map(function(e,t){return a(e,t)})):null,this.props.isAtEnd?null:l.a.createElement("div",{className:"loadingItem"},l.a.createElement(f.a,{label:u.default._("Loading items"),show:this.props.isFetching}))):r()},t}(s.Component);b.propTypes={className:s.PropTypes.string,data:s.PropTypes.arrayOf(s.PropTypes.shape({})),fetchMoreData:s.PropTypes.func.isRequired,isAtEnd:s.PropTypes.bool.isRequired,isFetching:s.PropTypes.bool.isRequired,onDataFetched:s.PropTypes.func,renderEmptyState:s.PropTypes.func.isRequired,renderItem:s.PropTypes.func.isRequired,scrollThreshold:s.PropTypes.number,shouldPreventScroll:s.PropTypes.bool},b.defaultProps={data:[],onDataFetched:function e(){},scrollThreshold:400,shouldPreventScroll:!0},i.defaultProps={pageSize:10},i.propTypes={pageSize:s.PropTypes.number,resourceName:s.PropTypes.string.isRequired,resourceOptions:s.PropTypes.shape({})}},207:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(t){function n(){var e,o,i;r(this,n);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return e=o=a(this,t.call.apply(t,[this].concat(l))),o.state={isHovering:!1},o.handlers={onMouseOver:function e(){return o._setHover(!0)},onMouseLeave:function e(){return o._setHover(!1)}},i=e,a(o,i)}return o(n,t),n.prototype.componentDidMount=function e(){y(this)},n.prototype.componentWillUnmount=function e(){clearTimeout(this.hoverTimer),g(this)},n.prototype._setHover=function e(t){var n=this;if(clearTimeout(this.hoverTimer),t&&m)return void(this.hoverTimer=setTimeout(function(){return n._setHover(t)},u));this.hoverTimer=setTimeout(function(){t!==n.state.isHovering&&n.setState({isHovering:t})},p)},n.prototype.render=function t(){return l.a.createElement(e,c({},this.props,{hoverHandlers:this.handlers,isHovering:this.state.isHovering}))},n}(s.Component)}var s=n(0),l=n.n(s);t.a=i;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=32,u=100,d=null,m=!1,h=[],f=function e(){clearTimeout(d),m=!0,d=setTimeout(function(){m=!1},u)},y=function e(t){0===h.length&&window.addEventListener("scroll",f),h.push(t)},g=function e(t){var n=h.indexOf(t);h.splice(n,1),0===h.length&&window.removeEventListener("scroll",f)}},2197:function(e,t){function n(e,t,n,o){for(var i=-1,s=a(r((t-e)/(n||1)),0),l=Array(s);s--;)l[o?s:++i]=e,e+=n;return l}var r=Math.ceil,a=Math.max;e.exports=n},2198:function(e,t,n){function r(e){return function(t,n,r){return r&&"number"!=typeof r&&o(t,n,r)&&(n=r=void 0),t=i(t),void 0===n?(n=t,t=0):n=i(n),r=void 0===r?t<n?1:-1:i(r),a(t,n,r,e)}}var a=n(2197),o=n(930),i=n(1890);e.exports=r},240:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=/[\- _,.<>:;+=*&@~\/\|!]*$/,a=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…",a=void 0;if(t.length<=n)return t;if(" "!==t[n-1]&&" "===t[n])a=t.substring(0,n);else{var o=t.lastIndexOf(" ",n);a=t.substring(0,o)}return(a=a.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+r},o=/\s\s+/g,i=function e(t){return t.replace(/\s\s+/g," ")}},3357:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return c.a.createElement("img",{alt:e,className:"head",src:t})}function s(e){return{viewerId:e.viewer.id}}var l=n(0),c=n.n(l),p=n(21),u=n(3358),d=n.n(u),m=n(6),h=n.n(m),f=3,y=[["fullWrapper"],["leftWrapper halfWrapper","rightWrapper halfWrapper isWholeHalf"],["leftWrapper halfWrapper","rightWrapper halfWrapper smallImage top","rightWrapper halfWrapper smallImage bottom"]],g=function e(t,n){var r=t.name,a=t.image_thumbnail_url;return c.a.createElement("div",{className:h()("Image","Module","boardMessageRep",n)},c.a.createElement("img",{alt:r,src:a}))},v=function e(t){function n(e){var t=e.full_name,n=e.is_default_image,r=e.image_large_url,a=e.image_medium_url,s=e.username,l=t?t[0].toUpperCase():"",p=r||a;return p&&!n?o?c.a.createElement("div",null,c.a.createElement("a",{href:"/"+s+"/"},i(t,p))):c.a.createElement("div",null,i(t,p)):c.a.createElement("div",{className:"head"},l)}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments[2],o=arguments[3],s=["ConversationHead",t];return c.a.createElement("div",{className:s.join(" ")},c.a.createElement("div",{className:"contentContainer"},c.a.createElement("div",{className:"headWrapper"},c.a.createElement("div",{className:"imagesWrapper"},r.map(function(e,t){return c.a.createElement("div",{className:e,key:t},n(a[t]))})))))},b=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.getUsersToShow=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.props.viewerId;return d()(n,{id:r}),n.concat(t.map(function(e){return{full_name:e}})).slice(0,3)},t.prototype.render=function e(){var t=this.props,n=t.board,r=t.emails,a=t.shouldLink,o=t.size,i=t.users,s=this.getUsersToShow(r,i),l=s.length<=3?y[s.length-1]:[];return n?g(n,o):v(o,l,s,a)},t}(l.Component);b.propTypes={board:l.PropTypes.shape({image_thumbnail_url:l.PropTypes.string,name:l.PropTypes.string}),emails:l.PropTypes.arrayOf(l.PropTypes.string),shouldLink:l.PropTypes.bool,size:l.PropTypes.oneOf(["small","medium","normal"]),users:l.PropTypes.arrayOf(l.PropTypes.shape({full_name:l.PropTypes.string,id:l.PropTypes.string,image_large_url:l.PropTypes.string,image_medium_url:l.PropTypes.string,is_default_image:l.PropTypes.bool,username:l.PropTypes.string})),viewerId:l.PropTypes.string},b.defaultProps={shouldLink:!1,size:"medium"},t.a=n.i(p.connect)(s)(b)},3358:function(e,t,n){function r(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],s=e.length;for(t=a(t,3);++r<s;){var l=e[r];t(l,r,e)&&(n.push(l),i.push(r))}return o(e,i),n}var a=n(233),o=n(3359);e.exports=r},3359:function(e,t,n){function r(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==l){var l=i;o(i)?s.call(e,i,1):a(e,i)}}return e}var a=n(3361),o=n(167),i=Array.prototype,s=i.splice;e.exports=r},3360:function(e,t){function n(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(a);++r<a;)o[r]=e[r+t];return o}e.exports=n},3361:function(e,t,n){function r(e,t){return t=a(t,e),null==(e=i(e,t))||delete e[s(o(t))]}var a=n(191),o=n(3363),i=n(3362),s=n(100);e.exports=r},3362:function(e,t,n){function r(e,t){return t.length<2?e:a(e,o(t,0,-1))}var a=n(190),o=n(3360);e.exports=r},3363:function(e,t){function n(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}e.exports=n},3735:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var r=40,a={BOARD:"board",PIN:"pin",USER:"user"}},3777:function(e,t,n){"use strict";function r(e){var t=e.contactCount,n=e.isInContactRequestsView,r=e.onClick;if(!t)return null;var a=void 0;return a=t>m?p.default._("1000+ contact requests","messaging"):t>=d&&t<=m?p.default._("100+ contact requests","messaging"):i.safeFormat(p.default.ngettext("{{ contactCount }} contact request","{{ contactCount }} contact requests",t),{contactCount:""+t}),o.a.createElement("div",{className:"Module ContactRequestsCount"},o.a.createElement(s.a,{className:c()({contactRequestView:n},"isBrioFlat","contactRequestsCount","btn"),hasIcon:n,hasText:!0,onClick:r,text:a,type:"borderless"}))}var a=n(0),o=n.n(a),i=n(13),s=n(12),l=n(6),c=n.n(l),p=n(4),u=n(20),d=100,m=1e3;r.propTypes={contactCount:a.PropTypes.number,isInContactRequestsView:a.PropTypes.bool,onClick:a.PropTypes.func.isRequired},t.a=n.i(u.a)({name:"ContactRequestsCountGetResource",key:"contactCount"},{allowStale:!1})(r)},3778:function(e,t,n){"use strict";function r(e){var t=e.alt,n=e.numPins,r=e.height,a=e.imageUrl,i=e.pinWidth,p=e.recentPins,u=s()(n).map(function(e){var t={backgroundImage:p[e]?"url("+p[e].url+")":"",height:r,width:i};return o.a.createElement("span",{className:"pinImage whiteOnHover",key:e,style:t})}),d=o.a.createElement("div",{className:"profileImage circle"},o.a.createElement(c.g,{height:l.b,shape:"circle",width:l.b},o.a.createElement("img",{alt:t,src:a})));return o.a.createElement("span",{className:"librofile"},o.a.createElement("div",{className:"pinImages rounded",style:{height:r}},u),a&&d)}var a=n(0),o=n.n(a),i=n(1495),s=n.n(i),l=n(3735),c=n(8);t.a=r,r.propTypes={alt:a.PropTypes.string,height:a.PropTypes.number.isRequired,imageUrl:a.PropTypes.string,numPins:a.PropTypes.number.isRequired,pinWidth:a.PropTypes.number.isRequired,recentPins:a.PropTypes.arrayOf(a.PropTypes.shape({url:a.PropTypes.string})).isRequired}},3779:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(3778),c=n(8),p=8,u=32,d={BOARD:"board",PIN:"pin",USER:"user"},m=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.getRowElements=function e(){var t=this,n=this.props,r=n.maxWidth,a=n.previewItems,o=40,i=function e(t){return!!(t&&t.width+o<r)&&(o+=t.width+8,!0)};return a.filter(i).map(function(e,n){return t.mapPreviewItemToElement(e,n)})},t.prototype.mapPreviewItemToElement=function e(t,n){var r=t.alt,a=t.height,o=t.imageUrl,i=t.type,p=t.width;switch(i){case d.PIN:var u={backgroundImage:"url("+o+")",backgroundPosition:"center top",backgroundSize:"cover",display:"inline-block",height:a,width:p};return s.a.createElement("span",{className:"newsHubRowItem rounded",key:n,style:u});case d.BOARD:return s.a.createElement("span",{className:"newsHubRowItem",key:n},s.a.createElement(c.g,{height:a,shape:"rounded",width:p},s.a.createElement("img",{alt:r,src:o,style:{height:a,width:p}})));case d.USER:return s.a.createElement("span",{className:"newsHubRowItem",key:n},s.a.createElement(l.a,t))}},t.prototype.render=function e(){var t=this.props,n=t.previewItemCount,r=t.maxWidth,a=this.getRowElements(),o=s.a.createElement("span",{className:"newsHubRowItem"},s.a.createElement("div",{className:"newsHubPreviewNumber rounded whiteOnHover"},s.a.createElement(c.b,{align:"center",size:"sm"},"+"+(n-a.length))));return s.a.createElement("div",{className:"newsHubRowWithCount",style:{width:r+"px"}},a,n-a.length>0?o:null)},t}(i.Component);m.propTypes={maxWidth:i.PropTypes.number.isRequired,previewItemCount:i.PropTypes.number,previewItems:i.PropTypes.arrayOf(i.PropTypes.shape({alt:i.PropTypes.string,height:i.PropTypes.number.isRequired,imageUrl:i.PropTypes.string.isRequired,recentPins:i.PropTypes.arrayOf(i.PropTypes.shape({url:i.PropTypes.string})),numPins:i.PropTypes.number,pinWidth:i.PropTypes.number,type:i.PropTypes.string.isRequired,width:i.PropTypes.number.isRequired}))},t.a=m},3783:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(13),c=n(12),p=n(6),u=n.n(p),d=n(4),m=n(5),h=n.n(m),f=function(e){function t(){var n,o,i;r(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=o=a(this,e.call.apply(e,[this].concat(l))),o.state={contactRequestCompleted:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1},o.handleInviteAcceptResponse=function(){o.setState({isAcceptButtonLoading:!0,isIgnoreButtonLoading:!1}),h.a.create("ContactRequestAcceptResource",{contact_request:o.props}).callUpdate().then(function(){o.setState({contactRequestCompleted:!0,isAcceptButtonLoading:!1})})},o.handleInviteDeclineResponse=function(){o.setState({isAcceptButtonLoading:!1,isIgnoreButtonLoading:!0}),h.a.create("ContactRequestIgnoreResource",{contact_request:o.props}).callDelete().then(function(){o.setState({contactRequestCompleted:!0,isIgnoreButtonLoading:!1})})},i=n,a(o,i)}return o(t,e),t.prototype.renderRequestText=function e(t,n,r){if(t){var a=t.name,o=t.url;return l.safeFormat(d.default._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> invited you to collaborate on <a href="{{ boardUrl }}">{{ boardName }}</a>'),{boardName:a,boardUrl:o,senderName:n,senderUsername:r})}return l.safeFormat(d.default._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> wants to send a message to you'),{senderName:n,senderUsername:r})},t.prototype.render=function e(){var t=this.state,n=t.contactRequestCompleted,r=t.isAcceptButtonLoading,a=t.isIgnoreButtonLoading;if(n)return null;var o=this.props,i=o.board,l=o.sender,p=l.image_large_url,m=l.full_name,h=l.username;return s.a.createElement("div",{className:"ContactRequestItem"},s.a.createElement("div",{className:"imageRep"},s.a.createElement("a",{href:"/"+h+"/"},s.a.createElement("img",{alt:h,className:"senderImage",src:p}))),s.a.createElement("div",{className:"requestInfo"},s.a.createElement("div",{className:"requestDescription"},s.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.renderRequestText(i,m,h)}})),s.a.createElement("div",{className:"actions"},s.a.createElement(c.a,{className:u()("removeInvite","isBrioFlat","btn"),loading:a,onClick:this.handleInviteDeclineResponse,text:d.default._("Ignore","ignore contact request")}),s.a.createElement(c.a,{className:u()("primary","acceptInvite","isBrioFlat","btn"),loading:r,onClick:this.handleInviteAcceptResponse,text:d.default._("Accept","accept contact request")}))))},t}(i.Component);f.propTypes={board:i.PropTypes.shape({name:i.PropTypes.string,url:i.PropTypes.string}),sender:i.PropTypes.shape({full_name:i.PropTypes.string.isRequired,image_large_url:i.PropTypes.string.isRequired,username:i.PropTypes.string.isRequired})},t.a=f},3784:function(e,t,n){"use strict";function r(e){var t=e.contactRequests,n=e.handleCancelViewContactRequests;return t?o.a.createElement("div",{className:"Module ContactRequestsCount"},o.a.createElement(l.a,{contactCount:t.length,isInContactRequestsView:!0,onClick:n}),o.a.createElement("div",{className:"disclaimer"},s.default._("These messages appear from people outside of your networks.","contact requests disclaimer")),t.map(function(e){return o.a.createElement(i.a,p({key:e.id},e))})):null}var a=n(0),o=n.n(a),i=n(3783),s=n(4),l=n(3777),c=n(20),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};r.propTypes={contactRequests:a.PropTypes.arrayOf(a.PropTypes.shape({board:a.PropTypes.shape({name:a.PropTypes.string,url:a.PropTypes.string}),id:a.PropTypes.string.isRequired,sender:a.PropTypes.shape({full_name:a.PropTypes.string.isRequired,image_large_url:a.PropTypes.string.isRequired,username:a.PropTypes.string.isRequired})})),handleCancelViewContactRequests:a.PropTypes.func},t.a=n.i(c.a)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1})(r)},3785:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(21),c=n(13),p=n(12),u=n(3357),d=n(274),m=n.n(d),h=n(6),f=n.n(h),y=n(4),g=n(31),v=n(5),b=n.n(v),T=n(14),E=n(27),P=n(22),_=n.n(P),w=n(240),C=n(631),I=50,N=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.handleHideConversation=function(e){e.stopPropagation();var t=o.props.data,n=t.id;b.a.create("ConversationResource",{conversation_id:n}).callDelete({showError:!1}),o.removeConversationChatHead(n),o.setState({isHidden:!0}),o.logConversationItemHide(n)},o.handleConversationItemClick=function(){var e=o.props.data;e.board||o.showConversationChatHead(e),o.setState({unread:0}),o.logConversationItemClick()},o.logConversationItemClick=function(){(0,o.props.contextLog)(101,{component:54,element:277})},o.logConversationItemHide=function(e){(0,o.props.contextLog)(182,{component:54,element:277,conversation_id:e})},o.state={isHidden:!1,unread:n.data.unread||0},o}return o(t,e),t.prototype.showConversationChatHead=function e(t){var r=this.props,a=r.dispatch;if(r.inReactConversations){var o=t.id;a(n.i(C.a)(o)),a(n.i(C.b)(o))}else m()().then(function(e){e.default.addConversation(t,!0)})},t.prototype.removeConversationChatHead=function e(t){m()().then(function(e){e.default.removeConversationById(t)})},t.prototype.renderConversationsTitleNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=n.map(function(e,t){return s.a.createElement("a",{href:"/"+e.username+"/",key:t},e.first_name)}).concat(t.map(function(e,t){return s.a.createElement("span",{key:t},e)}));return s.a.createElement("div",{className:"membersTitleNames"},r.map(function(e,t){var n=y.default._(", ","comma separating conversation member names");return s.a.createElement("span",{key:t},e,t===r.length-1?"":s.a.createElement("span",null,n))}))},t.prototype.renderConversationsTitleView=function e(t,n,r,a){var o=this.props.viewerId,i=a.filter(function(e){return e.id!==o});return s.a.createElement("h1",{className:"conversationTitleContainer"},n||this.renderConversationsTitleNames(r,i))},t.prototype.renderLastMessage=function e(t){var r=t.board,a=t.created_at,o=t.pin,i=t.sender,l=t.text,p=t.user,u=l;if(!u){var d=i.first_name;o?u=c.safeFormat(y.default._("{{ senderName }} sent a Pin","messaging"),{senderName:d}):r?u=c.safeFormat(y.default._("{{ senderName }} sent a board","messaging"),{senderName:d}):p&&(u=c.safeFormat(y.default._("{{ senderName }} sent a user profile","messaging"),{senderName:d}))}return u=n.i(w.a)(u||"",50),s.a.createElement("div",null,s.a.createElement("div",{className:"lastMessageContent"},u),s.a.createElement("div",{className:"lastMessageTimestamp"},y.default.getHumanizedTimesince(a)))},t.prototype.renderItemContent=function e(){var t=this.state.isHidden,n=this.props.data,r=n.board,a=n.emails,o=n.last_message,i=n.name,l=n.users,c=a||[];return s.a.createElement("div",{className:f()("ConversationListItemReact",{conversationHidden:t})},s.a.createElement("div",{className:"conversationRepContainer"},s.a.createElement(u.a,{board:r,emails:c,users:l})),s.a.createElement("div",{className:"conversationContentContainer"},this.renderConversationsTitleView(r,i,c,l),o?this.renderLastMessage(o):null),this.state.unread>0?s.a.createElement("span",{className:"conversationUnreadMark"}):null,s.a.createElement(p.a,{className:"conversationCloseButton",hasText:!0,onClick:this.handleHideConversation,text:y.default._("×","close button"),type:"borderless"}))},t.prototype.render=function e(){var t=this.props.data,n=t.board;return t.users.length?n?s.a.createElement(g.a,{onClick:this.handleConversationItemClick,to:n.url},this.renderItemContent()):s.a.createElement("div",{onClick:this.handleConversationItemClick,role:"button"},this.renderItemContent()):null},t}(i.Component);N.propTypes={contextLog:i.PropTypes.func.isRequired,data:i.PropTypes.shape({board:i.PropTypes.shape({image_thumbnail_url:i.PropTypes.string,name:i.PropTypes.string,url:i.PropTypes.string}),emails:i.PropTypes.arrayOf(i.PropTypes.string),id:i.PropTypes.string.isRequired,last_message:i.PropTypes.shape({board:i.PropTypes.shape({}),created_at:i.PropTypes.string,pin:i.PropTypes.shape({}),sender:i.PropTypes.shape({first_name:i.PropTypes.string,id:i.PropTypes.string}),text:i.PropTypes.string,user:i.PropTypes.shape({})}),name:i.PropTypes.string,unread:i.PropTypes.number.isRequired,users:i.PropTypes.arrayOf(i.PropTypes.shape({first_name:i.PropTypes.string,full_name:i.PropTypes.string,id:i.PropTypes.string,image_large_url:i.PropTypes.string,is_default_image:i.PropTypes.bool,username:i.PropTypes.string}))}),dispatch:i.PropTypes.func.isRequired,inReactConversations:i.PropTypes.bool.isRequired,viewerId:i.PropTypes.string.isRequired};var O=function e(t){return{viewerId:t.viewer.id}},R=function e(t){return n.i(E.b)(function(e,t){return{inReactConversations:["enabled","employees"].includes(t.v2ActivateExperiment("react_conversations_2"))}},t)};t.a=n.i(P.compose)(n.i(l.connect)(O),R,T.a)(N)},3786:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(21),c=n(12),p=n(274),u=n.n(p),d=n(6),m=n.n(d),h=n(4),f=n(3892),y=n.n(f),g=n(3358),v=n.n(g),b=n(5),T=n.n(b),E=n(3789),P=n(934),_=n(3898),w=n.n(_),C=n(3790),I=n(27),N=n(22),O=n.n(N),R=n(631),k=8,S=2,x=function(e){function t(){var o,i,l;r(this,t);for(var p=arguments.length,d=Array(p),f=0;f<p;f++)d[f]=arguments[f];return o=i=a(this,e.call.apply(e,[this].concat(d))),i.state={contactCounter:0,selectedEmails:{},selectedUsers:{},tokenizedItems:[],value:""},i.onHandleContactClick=function(e,t){var n=i.state,r=n.selectedEmails,a=n.selectedUsers,o=e?a:r,s=e?t.id:t,l=o[s];o[s]=!l,l?i.removeTokenItem(t):i.addTokenItem(t)},i.getSelectedEmails=function(){var e=i.state.selectedEmails;return Object.keys(e).filter(function(t){return e[t]})},i.getSelectedUsers=function(){var e=i.state.selectedUsers;return Object.keys(e).filter(function(t){return e[t]})},i.handleTypeaheadKeyDown=function(e){var t=i.state,n=t.contactCounter,r=t.selectedEmails,a=t.selectedUsers,o=t.tokenizedItems,s=t.value;if(e.keyCode===k&&n&&!s){var l=o.pop(),c=!!l.id,p=l.id||l;(c?a:r)[p]=!1,i.setState({contactCounter:n-1,tokenizedItems:o})}},i.handleInviteItemClick=function(e,t){var n=i.state,r=n.selectedUsers,a=n.selectedEmails,o=e?r:a,s=t.id||t;o[s]||(o[s]=!0,i.addTokenItem(t))
},i.handleSendMessage=function(){var e={text:null},t=i.getSelectedEmails(),r=i.getSelectedUsers(),a=i.props,o=a.dispatch,s=a.inReactConversations;if("function"==typeof u.a)if(s){var l=T.a.create("ConversationsResource",{user_ids:r,emails:t,text:null});l.callCreate().then(function(e){var t=e&&e.resource_response.data.id;o(n.i(R.a)(t)),o(n.i(R.b)(t))})}else u()().then(function(n){n.default.sendMessageToUsers(r,t,e)})},i.addTokenItem=function(e){var t=i.state,n=t.contactCounter,r=t.tokenizedItems;i.setState({contactCounter:n+1,tokenizedItems:r.concat([e]),value:""})},i.removeTokenItem=function(e){var t=i.state,n=t.contactCounter,r=t.tokenizedItems,a=n-1;e.id?(v()(r,{id:e.id}),i.setState({contactCounter:a,tokenizedItems:r})):i.setState({contactCounter:a,tokenizedItems:y()(r,e)})},i.renderSendMessageButton=function(){return s.a.createElement(c.a,{className:m()("sendNewMessageButton"),hasText:!0,onClick:i.handleSendMessage,showText:!0,text:h.default._("Next","open the new chat"),type:"borderless"})},i.renderCancelMessageButton=function(){var e=i.props.handleCancelNewMessageClick;return s.a.createElement(c.a,{className:m()("cancelNewMessageView","cancelButton"),hasText:!0,onClick:e,showText:!0,text:h.default._("Cancel","cancel new message view"),type:"borderless"})},l=o,a(i,l)}return o(t,e),t.prototype.getContactItem=function e(t,n,r){var a=t.emails,o=t.users;if(r&&o){return o[0].id===n?o[1]:o[0]}return a[0]},t.prototype.render=function e(){var t=this,n=this.props,r=n.conversationItems,a=n.viewerId,o=this.state,i=o.contactCounter,l=o.selectedUsers,c=o.selectedEmails,p=r.map(function(e,n){var r=e.emails,o=void 0===r?[]:r,i=e.users,p=void 0===i?[]:i,u=p.length+o.length;if(u>0&&u<=2){var d=0===o.length,m=t.getContactItem(e,a,d);if(m){var h=m.id||m;return s.a.createElement(E.a,{className:"conversationContactContainer",contactItem:m,conversationItem:e,currentUserID:a,handleContactWrapperClick:t.onHandleContactClick,isSelected:l[h]||c[h],isUser:d,key:h+"-"+n})}}return null});return s.a.createElement("div",null,s.a.createElement("div",{className:w.a.conversationsGroupHeader},s.a.createElement("h1",{className:w.a.newMessageTitle},h.default._("New message","conversations")),i>0?this.renderSendMessageButton():this.renderCancelMessageButton()),s.a.createElement("div",{className:w.a.conversationGroupTokenizedWrapper},s.a.createElement("div",{className:w.a.tokenizedWrapperTitle},h.default._("To:","new message")),s.a.createElement("div",{className:w.a.socialTypeaheadContainer},s.a.createElement(C.a,{tokenizedItems:this.state.tokenizedItems}),s.a.createElement(P.a,{changeOnTextHover:!1,className:m()(w.a.typeahead,"reactNewMessageTypeahead"),onChange:function e(n){return t.setState({value:n})},onInviteItemClick:this.handleInviteItemClick,onKeyDown:this.handleTypeaheadKeyDown,showInputPlaceholder:!1,value:this.state.value}))),s.a.createElement("div",{className:"contactsContainer"},p))},t}(i.Component);x.propTypes={conversationItems:i.PropTypes.arrayOf(i.PropTypes.shape({board:i.PropTypes.shape({image_thumbnail_url:i.PropTypes.string,name:i.PropTypes.string,url:i.PropTypes.string}),emails:i.PropTypes.arrayOf(i.PropTypes.string),id:i.PropTypes.string.isRequired,last_message:i.PropTypes.shape({board:i.PropTypes.shape({}),created_at:i.PropTypes.string,pin:i.PropTypes.shape({}),sender:i.PropTypes.shape({first_name:i.PropTypes.string,id:i.PropTypes.string}),text:i.PropTypes.string,user:i.PropTypes.shape({})}),name:i.PropTypes.string,unread:i.PropTypes.number.isRequired,users:i.PropTypes.arrayOf(i.PropTypes.shape({first_name:i.PropTypes.string,full_name:i.PropTypes.string,id:i.PropTypes.string,image_large_url:i.PropTypes.string,is_default_image:i.PropTypes.bool,username:i.PropTypes.string}))})),dispatch:i.PropTypes.func.isRequired,handleCancelNewMessageClick:i.PropTypes.func,inReactConversations:i.PropTypes.bool.isRequired,viewerId:i.PropTypes.string.isRequired};var q=function e(t){return{viewerId:t.viewer.id}},B=function e(t){return n.i(I.b)(function(e,t){return{inReactConversations:["enabled","employees"].includes(t.v2ActivateExperiment("react_conversations_2"))}},t)};t.a=n.i(N.compose)(n.i(l.connect)(q),B)(x)},3787:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(12),c=n(6),p=n.n(c),u=n(4),d=n(5),m=n.n(d),h=n(13),f=function(e){function t(){var n,o,i;r(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=o=a(this,e.call.apply(e,[this].concat(l))),o.state={boardInviteAccepted:!1,boardInvitePending:!0,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1},o.handleInviteResponse=function(e){var t=o.props.boardInviteItem,n=t.board,r=void 0===n?{}:n,a=t.invited_user,i=void 0===a?{}:a;o.setState({isAcceptButtonLoading:e,isIgnoreButtonLoading:!e});var s={board_id:r.id,invited_user_id:i.id},l=m.a.create("BoardInviteResource",s);(e?l.callUpdate():l.callDelete()).then(function(){o.setState({boardInviteAccepted:e,boardInvitePending:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1})})},i=n,a(o,i)}return o(t,e),t.prototype.getBoardRep=function e(t,n){return s.a.createElement("div",{className:"leftObjectWrapper boardRepWrapper"},s.a.createElement("div",{className:"Image Module boardMessageRep"},s.a.createElement("div",{className:"heightContainer"},s.a.createElement("img",{alt:t,src:n}))))},t.prototype.getBoardInfo=function e(t,n){return s.a.createElement("a",{href:n},s.a.createElement("div",{className:t},t))},t.prototype.getInviteeInfo=function e(t){var r=t.full_name;return s.a.createElement("div",{className:"inviterLine"},n.i(h.safeFormat)(u.default._("{{ fullName }} invited you to this board"),{fullName:r}))},t.prototype.renderPendingLayout=function e(t,n){var r=this,a=t.image_thumbnail_url,o=t.name,i=t.url;return s.a.createElement("div",{className:"pending"},s.a.createElement("div",{className:"left"},this.getBoardRep(o,a),s.a.createElement("div",{className:"description"},this.getBoardInfo(o,i),this.getInviteeInfo(n))),s.a.createElement("div",{className:"actions"},s.a.createElement(l.a,{className:"remove",loading:this.state.isIgnoreButtonLoading,onClick:function e(){return r.handleInviteResponse(!1)},text:u.default._("Ignore","ignore board invite")}),s.a.createElement(l.a,{className:p()("primary","accept"),loading:this.state.isAcceptButtonLoading,onClick:function e(){return r.handleInviteResponse(!0)},text:u.default._("Accept","accept board invite")})))},t.prototype.renderCompletedLayout=function e(t){var n=t.image_thumbnail_url,r=t.name,a=t.url;return s.a.createElement("div",{className:"success displayed"},s.a.createElement("div",{className:"left"},this.getBoardRep(r,n),s.a.createElement("div",{className:"description"},this.getBoardInfo(r,a),s.a.createElement("div",{className:"inviterLine"},u.default._("You joined this board","board invites")))))},t.prototype.render=function e(){if(!this.state.boardInvitePending&&!this.state.boardInviteAccepted)return null;var t=this.props.boardInviteItem,n=t.board,r=t.invited_by_user;return s.a.createElement("div",{className:"BoardInvite Module news"},this.state.boardInvitePending?this.renderPendingLayout(n,r):this.renderCompletedLayout(n))},t}(i.Component);f.propTypes={boardInviteItem:i.PropTypes.shape({board:i.PropTypes.shape({image_thumbnail_url:i.PropTypes.string,name:i.PropTypes.string,url:i.PropTypes.string}).isRequired,invited_by_user:i.PropTypes.shape({full_name:i.PropTypes.string,username:i.PropTypes.string}).isRequired,invited_user:i.PropTypes.shape({id:i.PropTypes.string}).isRequired})},t.a=f},3788:function(e,t,n){"use strict";function r(e){var t=e.boardInvites;return t?o.a.createElement("div",null,t.map(function(e){return o.a.createElement(i.a,{boardInviteItem:e,key:e.id})})):null}var a=n(0),o=n.n(a),i=n(3787),s=n(20);r.propTypes={boardInvites:a.PropTypes.arrayOf(a.PropTypes.shape({board:a.PropTypes.shape({image_thumbnail_url:a.PropTypes.string,name:a.PropTypes.string,url:a.PropTypes.string}),id:a.PropTypes.string.isRequired,invited_by_user:a.PropTypes.shape({full_name:a.PropTypes.string,username:a.PropTypes.string}),invited_user:a.PropTypes.shape({id:a.PropTypes.string})}))},t.a=n.i(s.a)({name:"BoardInvitesResource",key:"boardInvites",options:{current_user:!0,field_set_key:"news"}},{allowStale:!1})(r)},3789:function(e,t,n){"use strict";function r(e){var t=e.contactItem,n=e.currentUserID,r=e.conversationItem,a=e.handleContactWrapperClick,i=e.isSelected,s=e.isUser,c=["selectionIndicator","contactCircleRep","selectionIndicator"];return o.a.createElement("a",{className:"conversationContactContainer",key:r.id,onClick:function e(){return a(s,t)},onKeyDown:function e(){},role:"button",tabIndex:0},l(n,r),i?o.a.createElement("div",{className:c.join(" ")},o.a.createElement("em",null)):null)}var a=n(0),o=n.n(a),i=n(3357),s=n(4);t.a=r;var l=function e(t,n){var r=n.emails,a=n.users,l=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0!==t.length){var n=t[0];return o.a.createElement("div",{className:"contactWrapper"},o.a.createElement(i.a,{emails:[n],size:"small"}),o.a.createElement("div",{className:"contactTextInfo"},o.a.createElement("span",{className:"contactName"},n),o.a.createElement("span",{className:"contactDescription"},s.default._("Email friend","on selected contact list"))))}},c=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=n[0].id===t?n[1]:n[0],a=r.full_name;return o.a.createElement("div",{className:"contactWrapper"},o.a.createElement(i.a,{size:"small",users:[r]}),o.a.createElement("div",{className:"contactTextInfo"},o.a.createElement("span",{className:"contactName"},a),o.a.createElement("span",{className:"contactDescription"},s.default._("On Pinterest","info about a contact"))))};return o.a.createElement("div",null,r.length>0?l(r):c(a))};r.defaultProps={isSelected:!1},r.propTypes={contactItem:a.PropTypes.oneOfType([a.PropTypes.string,a.PropTypes.shape({first_name:a.PropTypes.string,full_name:a.PropTypes.string,id:a.PropTypes.string,image_large_url:a.PropTypes.string,is_default_image:a.PropTypes.bool,username:a.PropTypes.string})]),conversationItem:a.PropTypes.shape({board:a.PropTypes.shape({image_thumbnail_url:a.PropTypes.string,name:a.PropTypes.string,url:a.PropTypes.string}),emails:a.PropTypes.arrayOf(a.PropTypes.string),id:a.PropTypes.string.isRequired,last_message:a.PropTypes.shape({board:a.PropTypes.shape({}),created_at:a.PropTypes.string,pin:a.PropTypes.shape({}),sender:a.PropTypes.shape({first_name:a.PropTypes.string,id:a.PropTypes.string}),text:a.PropTypes.string,user:a.PropTypes.shape({})}),name:a.PropTypes.string,unread:a.PropTypes.number.isRequired,users:a.PropTypes.arrayOf(a.PropTypes.shape({first_name:a.PropTypes.string,full_name:a.PropTypes.string,id:a.PropTypes.string,image_large_url:a.PropTypes.string,is_default_image:a.PropTypes.bool,username:a.PropTypes.string}))}).isRequired,currentUserID:a.PropTypes.string.isRequired,handleContactWrapperClick:a.PropTypes.func.isRequired,isSelected:a.PropTypes.bool,isUser:a.PropTypes.bool.isRequired}},3790:function(e,t,n){"use strict";function r(e){var t=e.tokenizedItems;return o.a.createElement("div",{className:"reactTokenizedInputContainer",style:{zIndex:1e3}},o.a.createElement("div",{className:"tokenContainer"},t.map(function(e,t){return o.a.createElement("div",{className:"tokenItem",key:t},e.full_name?o.a.createElement(i.a,{size:"small",users:[e]}):o.a.createElement(i.a,{emails:[e],size:"small"}))})),o.a.createElement("div",{className:"textFieldContainer"}))}var a=n(0),o=n.n(a),i=n(3357);t.a=r},3791:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(12),c=n(3784),p=n(3785),u=n(3786),d=n(4),m=n(3788),h=n(5),f=n.n(h),y=n(81),g=n(3777),v=n(14),b=500,T="existingConversationsView",E="newMessageView",P="contactRequestsView",_=function(e){function t(){var n,o,i;r(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=o=a(this,e.call.apply(e,[this].concat(l))),o.state={bookmarks:null,conversationItems:[],conversationItemsHaveFetched:!1,fetching:!1,currentView:T},o.onhandleCancelSecondaryView=function(){o.setState({currentView:T})},o.handleNewMessageButtonClick=function(){o.setState({currentView:E}),o.logNewMessageButtonClick()},o.handleViewContactRequestsClick=function(){o.setState({currentView:P})},o.handleScroll=function(){if(!o.state.fetching){(o._container&&o._container.scrollHeight-o._container.scrollTop-o._container.clientHeight)<b&&o.fetchMore()}},o.logNewMessageButtonClick=function(){(0,o.props.contextLog)(101,{component:54,element:275})},o.updateWithConversationResponse=function(e){var t=e.resource_response.data;o.setState({bookmarks:e.bookmarks,conversationItems:o.state.conversationItems.concat(t),conversationItemsHaveFetched:!0,fetching:!1})},i=n,a(o,i)}return o(t,e),t.prototype.componentDidMount=function e(){this._container.addEventListener("scroll",this.handleScroll),this.setState({fetching:!0}),f.a.create("ConversationsResource").callGet({showError:!1}).then(this.updateWithConversationResponse)},t.prototype.componentWillUnmount=function e(){this._container.removeEventListener("scroll",this.handleScroll)},t.prototype.fetchMore=function e(){if(!this.state.fetching){this.setState({fetching:!0});var t=f.a.create("ConversationsResource",{bookmarks:this.state.bookmarks});if(t.atEnd())return this._container.removeEventListener("scroll",this.handleScroll),void this.setState({fetching:!1});t.callGet({showError:!1}).then(this.updateWithConversationResponse)}},t.prototype.renderNewMessageView=function e(){return s.a.createElement("div",{className:"newMessageContainer"},s.a.createElement(u.a,{conversationItems:this.state.conversationItems,handleCancelNewMessageClick:this.onhandleCancelSecondaryView}))},t.prototype.renderContactRequestsView=function e(){return s.a.createElement("div",{className:"contactRequestsContainer"},s.a.createElement(c.a,{handleCancelViewContactRequests:this.onhandleCancelSecondaryView}))},t.prototype.renderEmptyMessagesNewMessageUpsell=function e(){return s.a.createElement("div",{className:"EmptyConversations Module"},s.a.createElement("div",{className:"icon"}),s.a.createElement("div",{className:"intro"},s.a.createElement("div",null,d.default._("Send messages to your friends!")),s.a.createElement("div",null,d.default._("Plan projects, swap ideas and share your best discoveries."))))},t.prototype.renderExistingConversationsView=function e(){var t=this.state,n=t.conversationItems,r=t.conversationItemsHaveFetched;return s.a.createElement("div",{className:"existingConversationsContainer"},s.a.createElement("div",{className:"newMessageButtonContainer"},s.a.createElement(l.a,{className:"createConversationTab",hasIcon:!0,onClick:this.handleNewMessageButtonClick,text:d.default._("New message"),type:"borderless"})),s.a.createElement("div",{className:"viewContactRequestsButtonContainer"},s.a.createElement(g.a,{onClick:this.handleViewContactRequestsClick})),s.a.createElement("div",{className:"existingConversationItemsWrapper"},s.a.createElement("div",{className:"boardInvitesContainer"},s.a.createElement(m.a,null)),s.a.createElement("ul",{className:"conversationItems"},0===n.length&&r?this.renderEmptyMessagesNewMessageUpsell():n.map(function(e){return s.a.createElement("li",{className:"conversationItemWrapper",key:e.id},s.a.createElement(p.a,{data:e}))}))))},t.prototype.renderMessageView=function e(){switch(this.state.currentView){case T:return this.renderExistingConversationsView();case E:return this.renderNewMessageView();case P:return this.renderContactRequestsView()}},t.prototype.render=function e(){var t=this;return s.a.createElement(y.a,{view:42,viewParameter:203,isSurface:!0},s.a.createElement("div",{className:"conversationPanel",ref:function e(n){t._container=n}},this.renderMessageView()))},t}(i.Component);_.propTypes={contextLog:i.PropTypes.func.isRequired},t.a=n.i(v.a)(_)},3792:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(6),c=n.n(l),p=n(3735),u=n(8),d=4,m="100x",h="136x136",f=69,y=60,g=40,v=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.getV4RowElements=function e(){var t=this.props,n=t.previewItemCount,r=t.previewItems,a=new Set,o=Math.min(n-4,99);return[].concat(r).splice(0,4).map(function(e,t){var n=e.image_signature,r=e.images;if(e.type!==p.a.PIN)return null;if(n&&a.has(n))return null;a.add(n);var i={backgroundImage:"url("+(r["136x136"]||{}).url+")",backgroundPosition:"center top",backgroundSize:"cover",borderRadius:"4px",display:"inline-block",height:60,width:40},l=s.a.createElement("div",{className:"previewRowNumber"},"+"+o);return s.a.createElement("span",{className:"newsHubRowItem",key:t},s.a.createElement("span",{style:i},3===t&&l))}).filter(function(e){return e})},t.prototype.getRowElements=function e(){var t=this.props.previewItems,n=this.context.userAgent.isMobile,r=new Set,a=n?3:4;return[].concat(t).splice(0,a).map(function(e,t){var n=e.description,a=e.full_name,o=e.id,i=e.image_large_url,l=e.image_signature,d=e.image_thumbnail_urls,m=e.images,h=e.name,f=e.type,y=l||o;if(y&&r.has(y))return null;r.add(y);var g=void 0,v=void 0,b=void 0;switch(f){case p.a.PIN:g=n,v=(m["136x136"]||{}).url,b="rounded";break;case p.a.BOARD:g=h,v=(d||{})["100x"],b="rounded";break;case p.a.USER:g=a,v=i,b="circle"}return s.a.createElement("span",{className:"newsHubRowItem",key:t},s.a.createElement("div",{className:c()({whiteBorderOnHover:f===p.a.BOARD})},s.a.createElement(u.g,{height:69,shape:b,width:69},s.a.createElement(u.l,{alt:g,color:"#efefef",height:69,src:v,width:69}))))})},t.prototype.render=function e(){var t=this.props,n=t.isV4,r=t.previewItemCount,a=n?this.getV4RowElements():this.getRowElements(),o=Math.min(r-a.length,99),i=s.a.createElement("span",{className:"newsHubRowItem"},s.a.createElement("div",{className:"newsHubPreviewNumber rounded whiteOnHover"},s.a.createElement(u.b,{align:"center",size:"sm"},"+"+o)));return s.a.createElement("div",{className:"newsHubPreviewRow"},s.a.createElement("div",{className:"newsHubRowWithCount"},a,!n&&r-a.length>0?i:null))},t}(i.Component);v.propTypes={isV4:i.PropTypes.bool,previewItemCount:i.PropTypes.number,previewItems:i.PropTypes.arrayOf(i.PropTypes.shape({description:i.PropTypes.string,full_name:i.PropTypes.string,id:i.PropTypes.string,image_large_url:i.PropTypes.string,image_thumbnail_urls:i.PropTypes.shape({"100x":i.PropTypes.string}),image_signature:i.PropTypes.string,images:i.PropTypes.shape({"136x136":i.PropTypes.shape({url:i.PropTypes.string})}),type:i.PropTypes.string.isRequired}))},v.contextTypes={userAgent:i.PropTypes.shape({isMobile:i.PropTypes.bool.isRequired})},v.defaultProps={isV4:!1,previewItems:[]},t.a=v},3793:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(6),c=n.n(l),p={ONE:1,TWO:2,END:3},u=function(e){function t(){var n,o,i;r(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=o=a(this,e.call.apply(e,[this].concat(l))),o.state={educationStep:p.ONE},o.toStepTwo=function(){o.setState({educationStep:p.TWO})},o.dismissEducation=function(){var e=o.props.handleDismiss;o.setState({educationStep:p.END}),e()},i=n,a(o,i)}return o(t,e),t.prototype.componentDidMount=function e(){var t=this,n=this.props.stepDelay;this.educationStepTimer=setTimeout(function(){t.state.educationStep<p.TWO&&t.setState({educationStep:p.TWO})},n)},t.prototype.componentWillUnmount=function e(){clearTimeout(this.educationStepTimer)},t.prototype.renderPill=function e(t,n,r){return s.a.createElement("button",{onClick:r,className:c()("educationPill","slideIn",{fadeOut:n})},s.a.createElement("div",{className:"message"},t))},t.prototype.render=function e(){var t=this.state.educationStep,n=this.props,r=n.titleText,a=n.titleText2,o=this.renderPill(r,t===p.TWO,this.toStepTwo),i=this.renderPill(a,t===p.END,this.dismissEducation);return s.a.createElement("div",{className:"newsHubEducation"},s.a.createElement("div",{className:"educationStep stepOne"},(t===p.ONE||t===p.TWO)&&o),s.a.createElement("div",{className:"educationStep stepTwo bottom"},(t===p.TWO||t===p.END)&&i))},t}(i.Component);u.propTypes={handleDismiss:i.PropTypes.func.isRequired,stepDelay:i.PropTypes.number.isRequired,titleText:i.PropTypes.string.isRequired,titleText2:i.PropTypes.string.isRequired},t.a=u},3794:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(21),c=n(89),p=n(3),u=n(8),d=n(3735),m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h="136x136",f="100x",y=function(e){function t(){var o,i,s;r(this,t);for(var l=arguments.length,p=Array(l),u=0;u<l;u++)p[u]=arguments[u];return o=i=a(this,e.call.apply(e,[this].concat(p))),i.handleHeaderIconClick=function(e){i.props.dispatch(n.i(c.a)(101,{objectId:i.props.id,view:107,viewParameter:3081,element:1187}))},s=o,a(i,s)}return o(t,e),t.prototype.getImageProps=function e(t){switch(t.type){case d.a.PIN:return{alt:t.description,src:(t.images["136x136"]||{}).url};case d.a.BOARD:return{alt:t.name,src:(t.image_thumbnail_urls||{})["100x"]};case d.a.USER:return{alt:t.full_name,src:t.image_large_url};default:return{}}},t.prototype.render=function e(){var t=this.props,n=t.headerIconImageUrl,r=t.headerIconObjects,a=t.isV4,o=t.i18n;if(a){if(n)return s.a.createElement(u.g,{width:d.b,height:d.b,shape:"circle"},s.a.createElement(u.l,{alt:o._("Pinterest recommendation","label for notification with recommended content"),color:"#fff",height:d.b,src:n,width:d.b}));if(r&&r.length>0){var i=r[0];return i.type===d.a.USER?s.a.createElement("div",{style:{height:d.b,width:d.b}},s.a.createElement(u.s,{src:i.image_large_url,name:i.full_name})):s.a.createElement("div",{style:{borderRadius:"4px",height:d.b,width:d.b,overflow:"hidden"}},s.a.createElement(u.l,m({color:"#fff",height:d.b,width:d.b},this.getImageProps(i))))}}var l=void 0;return n?l=s.a.createElement("img",{className:"headerIconImage whiteOnHover",role:"presentation",src:n}):r&&r.length>0&&(l=[].concat(r).splice(0,3).map(function(e,t){return s.a.createElement("div",{className:"headerIcon",key:t},s.a.createElement("img",{alt:e.full_name,className:"headerIconImage",src:e.image_large_url}))})),s.a.createElement("div",{className:"newsHubHeaderIcon",onClick:this.handleHeaderIconClick,role:"log"},s.a.createElement(u.g,{shape:"circle"},s.a.createElement("div",{className:"headerIcons"},l)))},t}(i.Component);y.propTypes={dispatch:i.PropTypes.func.isRequired,headerIconImageUrl:i.PropTypes.string,headerIconObjects:i.PropTypes.arrayOf(i.PropTypes.shape({full_name:i.PropTypes.string,image_large_url:i.PropTypes.string,images:i.PropTypes.shape({"136x136":i.PropTypes.shape({url:i.PropTypes.string})}),image_thumbnail_urls:i.PropTypes.shape({"100x":i.PropTypes.string})})),id:i.PropTypes.string.isRequired,isV4:i.PropTypes.bool,i18n:p.a.isRequired},y.defaultProps={isV4:!1},t.a=n.i(l.connect)()(n.i(p.b)(y))},3795:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(21),c=n(3792),p=n(9),u=n(89),d=n(3794),m=n(3778),h=n(3796),f=n(3797),y=n(31),g=n(3799),v=n(3800),b=n(3),T=n(8),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),P={BASIC:0,TEXT:1,ROW_WITH_COUNT:2,GRID:3,MINI_PIN_GRID:4,CAROUSEL:5,LIST:6,TWO_ROW_WITH_COUNT:7,NO_ICON_TEXT:8,NO_ICON_ROW_WITH_COUNT:9,ROW_WITH_COUNT_2:10,MINI_PIN_GRID_2:11,MINI_BOARD_GRID:12,MINI_USER_GRID:13},_=4,w=146,C=73,I=function(e){function t(o){r(this,t);var i=a(this,e.call(this,o));return i.handleContentTextClick=function(e){i.props.dispatch(n.i(u.a)(101,{objectId:i.props.id,view:107,viewParameter:3081,element:1189}))},i.handleHeaderTextClick=function(e){i.props.dispatch(n.i(u.a)(101,{objectId:i.props.id,view:107,viewParameter:3081,element:1188}))},i.handleItemClick=function(e){(e.target.className.includes("newsHubItem")||e.target.className.includes("newsHubCell"))&&i.props.dispatch(n.i(u.a)(101,{objectId:i.props.id,view:107,viewParameter:3081,element:1194})),i.props.handleClick()},i.state={isV4:["enabled","employees","enabled_v4_concise","enabled_v4_verbose"].includes(o.v4Group)},i}return o(t,e),t.prototype.canBeSupportedByDisplayModes=function e(t,n){return n.some(function(e){return t&1<<e})},t.prototype.render=function e(){var t=this.props,n=t.headerIconImageUrl,r=t.headerIconObjects,a=t.headerText,o=t.i18n,i=t.id,l=t.lastUpdatedAt,c=t.overrideClickUrl,u=t.unread,m=this.state.isV4,h=c||"/news_hub/"+i,f=p.a.GEN.templateConst.settings.CANONICAL_MAIN_URL+h,g=this.displayComponent,v=this.miniPreviewRow,b=s.a.createElement(T.g,{height:8,shape:"circle",width:8},s.a.createElement("div",{style:{backgroundColor:"#bd081c",width:8,height:8}}));if(m){var E=864e5,P=new Date,_=new Date(l);return P.getTime()-_.getTime()>864e5&&_.setHours(0,0,0,0),s.a.createElement(y.a,{className:"newsHubItem newsHubV4",to:f,onClick:this.handleItemClick},s.a.createElement("div",{className:"newsHubCell"},s.a.createElement(T.d,{xs:{display:"flex"}},s.a.createElement(d.a,{headerIconImageUrl:n,headerIconObjects:r,id:i,isV4:m}),s.a.createElement(T.d,null,s.a.createElement(T.d,{xs:{display:"flex"},alignItems:"center"},s.a.createElement("div",{className:"newsMessage",onClick:this.handleHeaderTextClick,role:"log"},s.a.createElement("span",{dangerouslySetInnerHTML:{__html:a}})),u&&b),s.a.createElement("div",{className:"newsTimestamp"},o.getHumanizedTimesince(_.getTime())),!!g&&s.a.createElement("div",{className:"newsComponent"},g)))))}return s.a.createElement(y.a,{className:"newsHubItem",to:f,onClick:this.handleItemClick},s.a.createElement("div",null,s.a.createElement(d.a,{headerIconImageUrl:n,headerIconObjects:r,id:i}),s.a.createElement("div",{className:"newsHubCell"},v,s.a.createElement("div",{className:"newsMessage",onClick:this.handleHeaderTextClick,role:"log"},s.a.createElement("span",{dangerouslySetInnerHTML:{__html:a}})),s.a.createElement("div",{className:"newsComponent"},g))))},E(t,[{key:"displayComponent",get:function e(){var t=this.props,n=t.contentItemCount,r=t.contentItems,a=t.contentText,o=t.displayMode,i=this.state.isV4,l=r.filter(function(e){return e.content_object}).map(function(e){return e.content_object});if(i){if(this.canBeSupportedByDisplayModes(o,[P.MINI_PIN_GRID_2])){var p=l.map(function(e){return e.images["136x136"]});return s.a.createElement(m.a,{height:146,recentPins:p,numPins:4,pinWidth:73})}if(this.canBeSupportedByDisplayModes(o,[P.MINI_BOARD_GRID]))return s.a.createElement(h.a,{board:l[0]});if(this.canBeSupportedByDisplayModes(o,[P.MINI_USER_GRID])){var u=l[0];return s.a.createElement(m.a,{alt:u.full_name,height:146,imageUrl:u.image_large_url,recentPins:u.recent_pin_images["200x"],numPins:4,pinWidth:73})}if(this.canBeSupportedByDisplayModes(o,[P.ROW_WITH_COUNT_2]))return s.a.createElement(c.a,{isV4:!0,previewItemCount:n,previewItems:l})}return this.canBeSupportedByDisplayModes(o,[P.NO_ICON_ROW_WITH_COUNT])?s.a.createElement(c.a,{previewItemCount:n,previewItems:l}):this.canBeSupportedByDisplayModes(o,[P.BASIC])?null:this.canBeSupportedByDisplayModes(o,[P.TEXT])?s.a.createElement("div",{className:"newsText",onClick:this.handleContentTextClick,role:"log"},a):this.canBeSupportedByDisplayModes(o,[P.ROW_WITH_COUNT,P.CAROUSEL,P.TWO_ROW_WITH_COUNT])?s.a.createElement(v.a,{id:this.props.id,previewItemCount:n,previewItems:l}):this.canBeSupportedByDisplayModes(o,[P.MINI_PIN_GRID])?s.a.createElement(g.a,{id:this.props.id,pins:l}):void 0}},{key:"miniPreviewRow",get:function e(){var t=this.props,n=t.contentItems,r=t.displayMode,a=t.uniqueActionObjectCount;if(this.canBeSupportedByDisplayModes(r,[P.TWO_ROW_WITH_COUNT])){var o=n.filter(function(e){return e.action_object}).map(function(e){return e.action_object});return s.a.createElement(f.a,{previewItemCount:a,previewItems:o})}}}]),t}(i.Component);I.propTypes={contentItemCount:i.PropTypes.number,contentItems:i.PropTypes.arrayOf(i.PropTypes.object),contentText:i.PropTypes.string,dispatch:i.PropTypes.func.isRequired,displayMode:i.PropTypes.number.isRequired,handleClick:i.PropTypes.func,headerIconImageUrl:i.PropTypes.string,headerIconObjects:i.PropTypes.arrayOf(i.PropTypes.shape({description:i.PropTypes.string,full_name:i.PropTypes.string,image_cover_url:i.PropTypes.string,images:i.PropTypes.shape({"136x136":i.PropTypes.shape({url:i.PropTypes.string})}),name:i.PropTypes.string,type:i.PropTypes.string.isRequired})),headerText:i.PropTypes.string,id:i.PropTypes.string.isRequired,i18n:b.a.isRequired,lastUpdatedAt:i.PropTypes.string.isRequired,overrideClickUrl:i.PropTypes.string,subHeaderText:i.PropTypes.string,
type:i.PropTypes.string.isRequired,uniqueActionObjectCount:i.PropTypes.number,unread:i.PropTypes.bool,v4Group:i.PropTypes.string},I.defaultProps={handleClick:function e(){}},t.a=n.i(l.connect)()(n.i(b.b)(I))},3796:function(e,t,n){"use strict";function r(e){var t=e.board,n=t.name,r=t.image_cover_url,a=t.images;return o.a.createElement(i.a,{boardName:n,boardThumbs:a[c],coverImageUrl:r,height:s,numCols:l,width:p})}var a=n(0),o=n.n(a),i=n(972);t.a=r;var s=146,l=4,c="170x",p=296;r.propTypes={board:a.PropTypes.shape({image_cover_url:a.PropTypes.string,images:a.PropTypes.objectOf(a.PropTypes.arrayOf(a.PropTypes.shape({dominant_color:a.PropTypes.string,height:a.PropTypes.number,url:a.PropTypes.string,width:a.PropTypes.number}))),name:a.PropTypes.string.isRequired})}},3797:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(3779),c=60,p=63,u=40,d=275,m={BOARD:"board",PIN:"pin"},h="136x136",f=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.transformPreviewItems=function e(){for(var t=this.props.previewItems,n=new Set,r=[],a=t,o=Array.isArray(a),i=0,a=o?a:a[Symbol.iterator]();;){var s;if(o){if(i>=a.length)break;s=a[i++]}else{if(i=a.next(),i.done)break;s=i.value}var l=s,c=l.description,p=l.id,u=l.image_cover_url,d=l.image_signature,h=l.images,f=l.name,y=l.type;y===m.PIN?n.has(d)||(n.add(d),r.push({alt:c,type:y,imageUrl:(h["136x136"]||{}).url,width:40,height:63})):y===m.BOARD&&(n.has(p)||(n.add(p),r.push({alt:f,type:y,imageUrl:u,width:60,height:60})))}return r},t.prototype.render=function e(){var t=this.props.previewItemCount,n=this.transformPreviewItems();return s.a.createElement("div",{className:"newsMiniRowWithCount"},s.a.createElement(l.a,{maxWidth:275,previewItemCount:t,previewItems:n}))},t}(i.Component);f.propTypes={previewItemCount:i.PropTypes.number,previewItems:i.PropTypes.arrayOf(i.PropTypes.shape({description:i.PropTypes.string,id:i.PropTypes.string,image_signature:i.PropTypes.string,image_thumbnail_urls:i.PropTypes.shape({"100x":i.PropTypes.string}),images:i.PropTypes.shape({"136x136":i.PropTypes.shape({url:i.PropTypes.string})}),name:i.PropTypes.string,type:i.PropTypes.string.isRequired}))},t.a=f},3798:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(3793),c=n(3795),p=n(63),u=n(2042),d=n(81),m=n(14),h=n(113),f=n(27),y=n(107),g=n(22),v=n.n(g),b=n(3),T=4,E=864e5,P=function(e){function t(n){r(this,t);var o=a(this,e.call(this,n));return o.state={shouldEducate:!1},o.onDataFetched=function(e){o.props.experience&&e>T&&!o.state.shouldEducate&&o.setState({shouldEducate:!0})},o.handleItemClick=function(){o.handleComplete(),o.props.handleItemClick()},o.handleComplete=function(){var e=o.props,t=e.completeExperience,n=e.experience;n&&t(n.placement_id,n.experience_id)},o.handleDismiss=function(){var e=o.props,t=e.dismissExperience,n=e.experience;n&&t(n.placement_id,n.experience_id)},o.renderItem=function(e,t){return s.a.createElement("li",{className:"newsHubItemWrapper",key:t},o.renderDate(e.last_updated_at,t),s.a.createElement(c.a,{contentItemCount:e.content_item_count,contentItems:e.content_items,contentText:e.content_text,displayMode:e.encoded_display_mode,handleClick:o.handleItemClick,headerIconImageUrl:e.header_icon_image_url,headerIconObjects:e.header_icon_objects,headerText:e.header_text,id:e.id,lastUpdatedAt:e.last_updated_at,overrideClickUrl:e.override_click_url,subHeaderText:e.sub_header_text,type:e.type,uniqueActionObjectCount:e.unique_action_object_count,unread:e.unread,v4Group:o.props.v4Group}))},o.renderEmptyState=function(){var e=o.props.i18n;return s.a.createElement("div",{className:"emptyPanel"},s.a.createElement("div",{className:"emptyStateMessage"},e._("New! Discover ideas from your friends, followers and people who love your Pins!")))},o.currentDay=null,o.today=new Date,o.today.setHours(0,0,0,0),o}return o(t,e),t.prototype.getChildContext=function e(){return{preloadingSupported:!0}},t.prototype.componentDidMount=function e(){var t=this.props,n=t.experience,r=t.viewExperience;n&&r(n.placement_id,n.experience_id),this.logPanelImpression()},t.prototype.shouldComponentUpdate=function e(t,n){if(this.state.shouldEducate===n.shouldEducate){var r=this.props.experience,a=t.experience;return(r||{}).id!==(a||{}).id}return!0},t.prototype.getEducation=function e(){var t=this.props.experience;if(this.state.shouldEducate&&t){var n=t.display_data,r=n.step_delay,a=n.title_text,o=n.title_text_2;return s.a.createElement(l.a,{handleDismiss:this.handleDismiss,stepDelay:r,titleText:a,titleText2:o})}return null},t.prototype.logPanelImpression=function e(){(0,this.props.contextLog)(13,{view:107,viewParameter:3081})},t.prototype.renderDate=function e(t,n){var r=this.props.i18n,a=new Date(t);if(a.setHours(0,0,0,0),0!==n&&this.currentDay&&a.getTime()===this.currentDay.getTime())return null;this.currentDay=a;var o=void 0;return a.getTime()===this.today.getTime()?o=r._("Today"):a.getTime()===new Date(this.today-864e5).getTime()?o=r._("Yesterday"):a>=new Date(this.today-5184e5)?o=r.getHumanizedTimesince(a.getTime()):(o=p.a.formatDate(this.props.locale,a,p.a.DateFormatType.MONTH_DAY,!1),"ja"===this.props.locale&&(o=o.replace("月月","月")+"日")),s.a.createElement("div",{className:"newsHubItemDate"},o)},t.prototype.render=function e(){return s.a.createElement(d.a,{view:107,viewParameter:3081,isSurface:!0},s.a.createElement("div",null,this.getEducation(),s.a.createElement(u.a,{className:"newsHubPanel",onDataFetched:this.onDataFetched,renderEmptyState:this.renderEmptyState,renderItem:this.renderItem,resourceName:"NewsHubResource"})))},t}(i.Component);P.defaultProps={handleItemClick:function e(){}},P.childContextTypes={preloadingSupported:i.PropTypes.bool.isRequired};var _=function e(t){return n.i(f.b)(function(e,t){return{v4Group:t.v2GetGroup("news_hub_v3_ui")}},t)};t.a=n.i(g.compose)(n.i(y.a)(1000035),_,m.a,b.b,h.a)(P)},3799:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(21),c=n(89),p=function(e){function t(){var o,i,s;r(this,t);for(var l=arguments.length,p=Array(l),u=0;u<l;u++)p[u]=arguments[u];return o=i=a(this,e.call.apply(e,[this].concat(p))),i.handlePinGridClick=function(e){i.props.dispatch(n.i(c.a)(101,{objectId:i.props.id,view:107,viewParameter:3081,element:1191}))},s=o,a(i,s)}return o(t,e),t.prototype.getImageFromPin=function e(t){return t&&t.images&&t.images["290x"]?{backgroundImage:"url("+t.images["290x"].url+")"}:null},t.prototype.render=function e(){var t=this,n=[0,3,1,4,2,5];return s.a.createElement("div",{className:"newsHubPinGrid",onClick:this.handlePinGridClick,role:"log"},n.map(function(e){return s.a.createElement("div",{className:"pinItem whiteOnHover",key:e,style:t.getImageFromPin(t.props.pins[e])})}))},t}(i.Component);p.propTypes={dispatch:i.PropTypes.func.isRequired,id:i.PropTypes.string.isRequired,pins:i.PropTypes.arrayOf(i.PropTypes.shape({type:i.PropTypes.string.isRequired,description:i.PropTypes.string,images:i.PropTypes.shape({"290x":i.PropTypes.shape({url:i.PropTypes.string})}).isRequired})).isRequired},t.a=n.i(l.connect)()(p)},3800:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(21),c=n(89),p=n(3779),u=82,d=82,m=52,h=320,f=3,y=40,g=2,v=124,b={BOARD:"board",PIN:"pin",USER:"user"},T="100x",E="136x136",P="200x",_=function(e){function t(){var o,i,s;r(this,t);for(var l=arguments.length,p=Array(l),u=0;u<l;u++)p[u]=arguments[u];return o=i=a(this,e.call.apply(e,[this].concat(p))),i.handleRowClick=function(e){i.props.dispatch(n.i(c.a)(101,{objectId:i.props.id,view:107,viewParameter:3081,element:1193}))},s=o,a(i,s)}return o(t,e),t.prototype.transformPreviewItems=function e(){return this.props.previewItems.map(function(e){var t=e.description,n=e.full_name,r=e.image_large_url,a=e.image_thumbnail_urls,o=e.images,i=e.name,s=e.recent_pin_images,l=e.type;switch(l){case b.PIN:return{alt:t,type:l,imageUrl:(o["136x136"]||{}).url,width:52,height:82};case b.BOARD:return{alt:i,type:l,imageUrl:(a||{})["100x"],width:82,height:82};case b.USER:return{alt:n,type:l,imageUrl:r,recentPins:s["200x"]||[],numPins:3,pinWidth:40,width:124,height:82}}})},t.prototype.render=function e(){var t=this.props.previewItemCount,n=this.transformPreviewItems();return s.a.createElement("div",{className:"newsHubPreviewRow",onClick:this.handleRowClick,role:"log"},s.a.createElement(p.a,{maxWidth:320,previewItemCount:t,previewItems:n}))},t}(i.Component);_.propTypes={dispatch:i.PropTypes.func.isRequired,id:i.PropTypes.string.isRequired,previewItemCount:i.PropTypes.number.isRequired,previewItems:i.PropTypes.arrayOf(i.PropTypes.shape({description:i.PropTypes.string,full_name:i.PropTypes.string,type:i.PropTypes.string.isRequired,image_large_url:i.PropTypes.string,image_thumbnail_urls:i.PropTypes.shape({"100x":i.PropTypes.string}),images:i.PropTypes.shape({"136x136":i.PropTypes.shape({url:i.PropTypes.string})}),recent_pin_images:i.PropTypes.shape({"200x":i.PropTypes.arrayOf(i.PropTypes.shape({url:i.PropTypes.string}))})}))},t.a=n.i(l.connect)()(_)},3815:function(e,t,n){t=e.exports=n(18)(),t.push([e.i,"._1mN_2 {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n    -webkit-justify-content: space-between;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    padding: 10px;\n}\n\n._3b2sr {\n    background: #f1f1f1;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    padding: 10px;\n}\n\n._1zZTh {\n    -webkit-box-align: center;\n    -webkit-align-items: center;\n        -ms-flex-align: center;\n            align-items: center;\n    color: #b5b5b5;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    padding-right: 10px;\n}\n\n.ClU2f {\n    font-size: 14px;\n}\n\n._1UOMX {\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-flex: 1;\n    -webkit-flex-grow: 1;\n        -ms-flex-positive: 1;\n            flex-grow: 1;\n    position: relative;\n}\n",""]),t.locals={conversationsGroupHeader:"_1mN_2",conversationGroupTokenizedWrapper:"_3b2sr",tokenizedWrapperTitle:"_1zZTh",newMessageTitle:"ClU2f",socialTypeaheadContainer:"_1UOMX"}},3890:function(e,t){function n(e,t,n,r){for(var a=n-1,o=e.length;++a<o;)if(r(e[a],t))return a;return-1}e.exports=n},3891:function(e,t,n){function r(e,t,n,r){var c=r?i:o,u=-1,d=t.length,m=e;for(e===t&&(t=l(t)),n&&(m=a(e,s(n)));++u<d;)for(var h=0,f=t[u],y=n?n(f):f;(h=c(m,y,h,r))>-1;)m!==e&&p.call(m,h,1),p.call(e,h,1);return e}var a=n(200),o=n(1789),i=n(3890),s=n(269),l=n(940),c=Array.prototype,p=c.splice;e.exports=r},3892:function(e,t,n){var r=n(589),a=n(3893),o=r(a);e.exports=o},3893:function(e,t,n){function r(e,t){return e&&e.length&&t&&t.length?a(e,t):e}var a=n(3891);e.exports=r},3898:function(e,t,n){var r=n(3815);"string"==typeof r&&(r=[[e.i,r,""]]);var a=n(19)(r,{});r.locals&&(e.exports=r.locals)},589:function(e,t,n){function r(e,t){return i(o(e,t,a),e+"")}var a=n(245),o=n(1107),i=n(1108);e.exports=r},631:function(e,t,n){"use strict";function r(e){return{type:"CONVERSATION_SHOW",payload:{id:e}}}function a(e){return{type:"CONVERSATION_HIDE",payload:{id:e}}}function o(e){return{type:"CONVERSATION_OPEN",payload:{id:e}}}function i(e){return{type:"CONVERSATION_CLOSE",payload:{id:e}}}function s(e){return{type:"CONVERSATION_CREATE",payload:e}}function l(e){return{type:"CONVERSATION_DELETE",payload:{id:e}}}t.a=r,t.d=a,t.b=o,t.c=i},692:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(6),c=n.n(l),p=n(3),u=function(e){function t(){var n,o,i;r(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=o=a(this,e.call.apply(e,[this].concat(l))),o.handleChange=function(e){o.props.onChange&&o.props.onChange(e.nativeEvent.target.checked)},i=n,a(o,i)}return o(t,e),t.prototype.render=function e(){var t=this.props.i18n,n=void 0,r=this.props.type,a="fancyToggle"===r||"flatToggle"===r;n=c()(this.props.className,"Module","Checkbox",this.props.type,{fancyToggle:"fancyToggle"===r,styledToggle:a||"fancyCheckbox"===r,on:this.props.checked});var o=c()(this.props.className,"Module","Checkbox",{on:this.props.checked});return a?s.a.createElement("div",{className:n},s.a.createElement("div",{className:"slider"}),s.a.createElement("p",{className:"onText status"},t._("Yes")),s.a.createElement("p",{className:"offText status"},t._("No")),s.a.createElement("input",{checked:this.props.checked,className:o,id:this.props.id,name:this.props.name,onChange:this.handleChange,type:"checkbox"})):"fancyCheckbox"===this.props.type?s.a.createElement("div",{className:n},s.a.createElement("span",{className:"visibleCheck"}),s.a.createElement("input",{checked:this.props.checked,className:o,id:this.props.id,name:this.props.name,onChange:this.handleChange,type:"checkbox"})):(n=c()(this.props.className,"Module","Checkbox",{on:this.props.checked}),s.a.createElement("input",{checked:this.props.checked,className:o,id:this.props.id,name:this.props.name,onChange:this.handleChange,type:"checkbox"}))},t}(i.Component);u.propTypes={checked:i.PropTypes.bool,className:i.PropTypes.string,i18n:p.a.isRequired,id:i.PropTypes.string,name:i.PropTypes.string,onChange:i.PropTypes.func,type:i.PropTypes.oneOf(["fancyToggle","flatToggle","fancyCheckbox","default"])},u.defaultProps={checked:!1,type:"default"},t.a=n.i(p.b)(u)},698:function(e,t,n){"use strict";function r(e){var t;return t={},t[a]={connected:!!e.facebook_url,url:e.facebook_url},t[i]={connected:e.connected_to_google||!1},t[s]={connected:!!e.gplus_url},t[p]={connected:e.connected_to_microsoft||!1},t[c]={connected:e.connected_to_rakuten||!1},t[o]={connected:!!e.twitter_url,url:e.twitter_url},t[l]={connected:e.connected_to_yahoo||!1},t}t.a=r,n.d(t,"b",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"e",function(){return l});var a="facebook",o="twitter",i="google",s="gplus",l="yahoo",c="rakuten",p="microsoft"},740:function(e,t,n){"use strict";function r(e){var t=e.id,n=e.name,r=e.onChange,a=e.onFocus,i=e.options,s=void 0===i?[]:i,l=e.value;return o.a.createElement("div",null,o.a.createElement("select",{className:"Module Select",id:t,name:n,onChange:r,onFocus:a,value:l},s.map(function(e,t){return o.a.createElement("option",{key:t,value:e.key},e.name)})))}var a=n(0),o=n.n(a);t.a=r,r.propTypes={id:a.PropTypes.string,name:a.PropTypes.string,onChange:a.PropTypes.func.isRequired,onFocus:a.PropTypes.func,options:a.PropTypes.arrayOf(a.PropTypes.shape({key:a.PropTypes.string.isRequired,name:a.PropTypes.string.isRequired}).isRequired),value:a.PropTypes.string.isRequired}},749:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return y.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function l(e,t){return y.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}var c=n(0),p=n.n(c),u=n(1819),d=n(1060),m=n(29),h=n(4),f=n(5),y=n.n(f),g=n(7);t.b=s,t.a=l;var v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b="board_create",T=function(e){function t(){var n,r,i;a(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=r=o(this,e.call.apply(e,[this].concat(l))),r.state={selectedCollaborators:[]},r.handleSubmit=function(e){return y.a.create("BoardResource",v({},e)).callCreate({showError:!1}).then(function(e){m.a.trackEvent(b,"success");var t=e.resource_response.data;t&&(r.inviteSelectedColaborators(t.id),g.b.publish("currentUser","boardCreated",t)),r.props.onBoardCreate(t)}).catch(function(e){throw m.a.trackEvent(b,"error"),e.message})},r.handleSelectedCollaboratorsChange=function(e){r.setState({selectedCollaborators:e})},r.emptyBoardData={collab_board_email:!0,collaborator_invites_enabled:!0,id:"",is_collaborative:!1,name:void 0,description:"",category:"other",owner:{username:r.props.currentUser.username},pin_count:0},i=n,o(r,i)}return i(t,e),t.prototype.inviteSelectedColaborators=function e(t){var n=this.state.selectedCollaborators.filter(function(e){return"email"===e.type});n.length>=1&&s(t,n.map(function(e){return e.type}));var r=this.state.selectedCollaborators.filter(function(e){return e.type.startsWith("user")});r.length>=1&&l(t,r.map(function(e){return e.id}))},t.prototype.render=function e(){var t=this.props,n=t.privacy,a=r(t,["privacy"]),o=p.a.createElement("div",null,p.a.createElement("div",{className:"boardEditCollaborators"},p.a.createElement(u.a,{onSelectedCollaboratorsChange:this.handleSelectedCollaboratorsChange,user:this.props.currentUser})));return p.a.createElement(d.a,v({},a,{board:v({},this.emptyBoardData,{privacy:n}),boardCollaboratorsSection:o,currentUserIsOwner:!0,gaCategory:b,isDeletable:!1,isEditable:!0,onSubmit:this.handleSubmit,submitText:h.default._("Create"),title:h.default._("Create board")}))},t}(c.Component);T.propTypes={categories:c.PropTypes.arrayOf(c.PropTypes.shape({key:c.PropTypes.string.isRequired,name:c.PropTypes.string.isRequired})).isRequired,currentUser:c.PropTypes.shape({connected_to_google:c.PropTypes.bool,connected_to_yahoo:c.PropTypes.bool,email:c.PropTypes.string,facebook_url:c.PropTypes.string,twitter_url:c.PropTypes.string,username:c.PropTypes.string}).isRequired,onBoardCreate:c.PropTypes.func.isRequired,privacy:c.PropTypes.oneOf(["public","secret"]).isRequired},t.c=T},919:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=n.n(i),l=n(3791),c=n(3798),p=n(405),u=function(e){function t(){return r(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.shouldComponentUpdate=function e(t,n){return this.props.currentPanel!==t.currentPanel||this.props.conversationsUnseenCount!==t.conversationsUnseenCount||this.props.newsHubCount!==t.newsHubCount},t.prototype.render=function e(){var t=this.props,n=t.conversationsUnseenCount,r=t.currentPanel,a=t.handleItemClick,o=t.locale,i=t.newsHubCount,u=t.onButtonClick,d=void 0;return r===p.a.NEWS_HUB?d=s.a.createElement(c.a,{handleItemClick:a,locale:o}):r===p.a.INBOX&&(d=s.a.createElement(l.a,null)),s.a.createElement("div",{className:"newsConversationsDropdown"},s.a.createElement(p.b,{conversationsUnseenCount:n,newsHubCount:i,onButtonClick:u,selectedTab:r}),s.a.createElement("div",{className:"content"},d))},t}(i.Component);t.default=u,u.propTypes={conversationsUnseenCount:i.PropTypes.number.isRequired,currentPanel:i.PropTypes.number.isRequired,handleItemClick:i.PropTypes.func,locale:i.PropTypes.string.isRequired,newsHubCount:i.PropTypes.number.isRequired,onButtonClick:i.PropTypes.func.isRequired}},926:function(e,t){function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},930:function(e,t,n){function r(e,t,n){if(!s(n))return!1;var r=typeof t;return!!("number"==r?o(n)&&i(t,n.length):"string"==r&&t in n)&&a(n[t],e)}var a=n(121),o=n(151),i=n(167),s=n(53);e.exports=r},934:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),l=n(21),c=n(1833),p=n.n(c),u=n(6),d=n.n(u),m=n(698),h=n(4),f=n(1059),y=n(1822),g=n(1144),v=n(80),b=n(68),T=n(201),E=n(14),P=n(7),_=n(13),w=n(749),C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I=[v.default.FACEBOOK,v.default.TWITTER,v.default.GPLUS,v.default.YAHOO],N=function(e){function t(){var o,i,l;r(this,t);for(var c=arguments.length,u=Array(c),h=0;h<c;h++)u[h]=arguments[h];return o=i=a(this,e.call.apply(e,[this].concat(u))),i.state={networks:n.i(m.a)(i.props.viewer),open:!1,typeaheadSuggestions:[]},i.onUserInviteClick=function(e){var t=e.id,r=i.props,a=r.boardId,o=r.onInviteItemClick;a?o(n.i(w.a)(a,[t])):o(!0,e)},i.handleBodyClick=function(e){i._results.contains(e.target)||i.setState({open:!1})},i.handleTypeaheadSuggestionsChange=function(e){var t=i.props.viewer;i.setState({typeaheadSuggestions:p()(e,function(e){return e.id!==t.id})})},i.handleOnEmailInviteClick=function(){var e=i.props,t=e.boardId,r=e.onInviteItemClick,a=e.value;t?r(n.i(w.b)(t,[a])):r(!1,a)},i.subscriber=P.b.subscribe("currentUser","socialNetworkUpdated",function(e,t,r){i.setState({networks:n.i(m.a)(r)})}),i.logTypeaheadInput=function(e){(0,i.props.contextLog)(4113,{component:13029,element:1043,entered_query:e})},i.logSearchContactItemClick=function(e){var t=i.props;(0,t.contextLog)(101,{component:13029,element:1044,entered_query:t.value,result_index:e})},i.renderResultItems=function(){var e=i.props.changeOnTextHover,t=d()("Typeahead","userSelect",{open:i.state.open}),n=i.state.typeaheadSuggestions.map(function(t,n){return s.a.createElement(y.a,C({currentUser:i.props.currentUser,key:n,onClick:function e(){i.onUserInviteClick(t),i.logSearchContactItemClick(n)},onHoverEnd:function t(){return e?i.restoreTextFieldValue():null},onHoverStart:function n(){return e?i.forceTextFieldValue(t.label):null}},t))}).concat(i.getStaticItems()).map(function(e,t){return s.a.createElement("li",{key:t,role:"button",tabIndex:"0"},e)});return s.a.createElement("div",{className:t,ref:function e(t){i._results=t},style:{zIndex:1e3}},s.a.createElement("ul",null,n),i.props.inBoardCollaboratorInviter?s.a.createElement("div",{className:"footer white"}):null)},l=o,a(i,l)}return o(t,e),t.prototype.componentDidMount=function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.addEventListener(e,t.handleBodyClick)})},t.prototype.componentWillReceiveProps=function e(t){var n=t.value;this.setState({open:n.length>0})},t.prototype.componentWillUnmount=function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.removeEventListener(e,t.handleBodyClick)}),this.subscriber.unsubscribe()},t.prototype.getStaticItems=function e(){return[].concat(this.getEmailItems(),this.getSocialItems(this.state.networks))},t.prototype.getEmailItems=function e(){var t=this.props.value;return[s.a.createElement(f.a,{email:t,isValid:n.i(_.isEmailAddress)(t),key:"send-to-email-component",onClick:this.handleOnEmailInviteClick,showSendEmailText:!1})]},t.prototype.getSocialItems=function e(t){return Object.keys(t).filter(function(e){return I.includes(e)}).filter(function(e){return t[e].connected===!1}).map(function(e,t){return s.a.createElement(g.a,{key:"socialConnect-"+e,network:e})})},t.prototype.forceTextFieldValue=function e(t){this.previousValue=this.props.value,this.props.onChange(t)},t.prototype.restoreTextFieldValue=function e(){this.props.onChange(this.previousValue),delete this.previousValue},t.prototype.render=function e(){var t=this,n=this.props,r=n.boardId,a=n.className,o=n.inBoardCollaboratorInviter,i=n.onChange,l=n.onKeyDown,c=n.showInputPlaceholder,p=n.value,u=d()("Input","field",{reactCollaboratorInviterTypeaheadCustom:o},{collaboratorInviterTypeahead:!o}),m=r?{board:r}:null;return s.a.createElement(T.a,{className:d()(a,"reactSocialTypeahead"),onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:m,value:p},s.a.createElement("div",null,s.a.createElement("div",{className:"TypeaheadField userSelect inputContainer"},s.a.createElement(b.a,{className:u,onChange:function e(n){i(n),t.logTypeaheadInput(n)},onKeyDown:l,placeholder:c?h.default._("Name or email","search"):null,value:p})),this.renderResultItems()))},t}(i.Component);N.propTypes={boardId:i.PropTypes.string,changeOnTextHover:i.PropTypes.bool,className:i.PropTypes.string,contextLog:i.PropTypes.func.isRequired,currentUser:i.PropTypes.shape({full_name:i.PropTypes.string,id:i.PropTypes.string.isRequired}),inBoardCollaboratorInviter:i.PropTypes.bool,onChange:i.PropTypes.func.isRequired,onInviteItemClick:i.PropTypes.func.isRequired,onKeyDown:i.PropTypes.func,showInputPlaceholder:i.PropTypes.bool,value:i.PropTypes.string,viewer:i.PropTypes.shape({connected_to_google:i.PropTypes.bool,connected_to_microsoft:i.PropTypes.bool,connected_to_yahoo:i.PropTypes.bool,facebook_url:i.PropTypes.string,full_name:i.PropTypes.string,id:i.PropTypes.string,gplus_url:i.PropTypes.string,twitter_url:i.PropTypes.string})},N.defaultProps={changeOnTextHover:!1,onKeyDown:function e(){},showInputPlaceholder:!0};var O=function e(t){return{viewer:t.viewer}};t.a=n.i(E.a)(n.i(l.connect)(O)(N))},940:function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}e.exports=n},972:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return e.height/e.width}function s(e,t,n,r){var a=i(n),o=Math.max(y.HALF,r)*e,s=o/t,l=r*e,c={height:o,left:0,maxWidth:Number.MAX_SAFE_INTEGER,position:"relative",top:0,width:t};if(a<s){var p=o/n.height,u=n.width*p,d=(u-t)/-2;c.left=d,c.width=u}else{var m=t/n.width,h=n.height*m,f=(h-l)/-2;c.height=h,c.top=f}return c}function l(e,t){var n={};if(e<3)if(Math.random()<.5)n[0]=!0;else{if(1===e)return n;n[1]=!0}else{if(t.length<3)n[1]=!0;else{i(t[1])>i(t[2])?n[1]=!0:n[2]=!0}n[1]&&e>g&&Math.random()<.5&&(n[3]=!0)}return n}function c(e,t,n,r,a){for(var o=(t-f*(e-1))/e,i=n-f*(v-1),s=l(e,a),c=Object.keys(s).length,p=[],u=0;u<r;u+=1)u>=r-c?p.push(y.ASYM_BOTTOM):s[u%e]?p.push(y.ASYM_TOP):p.push(y.HALF);return{colHeight:i,colWidth:o,gridHeightRatioArray:p}}function p(e){var t=e.colHeight,n=e.colWidth,r=e.heightRatio,a=e.image,o=e.boardName,i=Math.max(y.HALF,r)*t,l={height:i+f,margin:f/2},c=s(t,n,a,r);return m.a.createElement("div",{style:l},m.a.createElement("div",{className:"bg-super-light-gray overflow-hidden",style:{height:i}},a.url?m.a.createElement("div",{className:"relative"},m.a.createElement("div",{className:"imageWash absolute"}),m.a.createElement("img",{alt:o,src:a.url,style:c})):null))}function u(e){var t=e.height,n=e.imgUrl,r=e.imgPos,a=e.width,o={height:t,padding:f/2,width:a},i=t/a,s="center center";if(r.y||r.x){var l=1;l=r.height/r.width>i?a/r.width:t/r.height;s="-"+r.x*l+"px -"+r.y*l+"px"}var c={backgroundImage:"url("+n+")",backgroundPosition:s,backgroundRepeat:"no-repeat",backgroundSize:"cover",minHeight:"100%"};return m.a.createElement("div",{style:o},m.a.createElement("div",{className:"relative",style:c},m.a.createElement("div",{className:"imageWash absolute"})))}var d=n(0),m=n.n(d),h=n(8),f=2,y={ASYM_BOTTOM:.25,ASYM_TOP:.75,HALF:.5},g=3,v=2,b={dominant_color:"#FFFFFF",height:0,url:"",width:0},T=function(e){function t(){var n,o,i;r(this,t);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return n=o=a(this,e.call.apply(e,[this].concat(l))),o.renderItem=function(e,t,n){var r=o.props.boardName,a=n.gridHeightRatioArray[t];return m.a.createElement(p,{boardName:r,colHeight:n.colHeight,colWidth:n.colWidth,heightRatio:a,image:e})},i=n,a(o,i)}return o(t,e),
t.prototype.render=function e(){for(var t=this,n=this.props,r=n.boardThumbs,a=n.coverImagePos,o=n.coverImageUrl,i=n.height,s=n.coverImageWidth,l=void 0===s?i:s,p=n.numCols,d=n.width,f=r||[],y=o?p-2:p,T=o?d-l:d,E=v*y,P=f.slice(0,E),_=f.length;_<E;_+=1)P.push(b);this.layoutHelper=this.layoutHelper||c(y,T,i,E,f.slice(0,g));var w={height:i},C={width:T},I=function e(n){var r=n.data,a=n.itemIdx;return t.renderItem(r,a,t.layoutHelper)};return m.a.createElement("div",{className:"overflow-hidden",style:w},m.a.createElement(h.g,{height:i,shape:"rounded",width:d},m.a.createElement("div",{className:"flex",style:{margin:"-1px"}},o&&m.a.createElement(u,{height:i,imgPos:a,imgUrl:o,width:l}),m.a.createElement("div",{style:C},m.a.createElement(h.p,{comp:I,flexible:!0,items:P,loadItems:function e(){},columnWidth:this.layoutHelper.colWidth,gutterWidth:0,minCols:1,ref:function e(n){t.gridRef=n}})))))},t}(d.Component);T.defaultProps={boardName:"",boardThumbs:[],coverImagePos:{height:0,width:0,x:0,y:0},coverImageUrl:""},t.a=T,T.propTypes={boardName:d.PropTypes.string,boardThumbs:d.PropTypes.arrayOf(d.PropTypes.shape({dominant_color:d.PropTypes.string,height:d.PropTypes.number,url:d.PropTypes.string,width:d.PropTypes.number})),coverImagePos:d.PropTypes.shape({height:d.PropTypes.number,width:d.PropTypes.number,x:d.PropTypes.number,y:d.PropTypes.number}),coverImageUrl:d.PropTypes.string,coverImageWidth:d.PropTypes.number,height:d.PropTypes.number.isRequired,numCols:d.PropTypes.number.isRequired,width:d.PropTypes.number.isRequired}}});